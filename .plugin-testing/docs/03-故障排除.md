# ğŸ”§ æ•…éšœæ’é™¤æŒ‡å—

## å¿«é€Ÿè¨ºæ–·

å¦‚æœé‡åˆ°å•é¡Œï¼Œç”¨é€™å€‹æµç¨‹å¿«é€Ÿè¨ºæ–·ï¼š

```
1. å•é¡Œæ˜¯ä»€éº¼? (æ¸¬è©¦å¤±æ•—ã€ç„¡æ³•åŸ·è¡Œã€ç’°å¢ƒå•é¡Œ)
2. åœ¨å“ªå€‹å¤–æ›? (buygo-plus-oneã€payment-gateway ç­‰)
3. æœ€å¾Œä¸€æ¬¡æˆåŠŸæ˜¯ä»€éº¼æ™‚å€™?
4. æ”¹è®Šäº†ä»€éº¼?
5. éŒ¯èª¤è¨Šæ¯æ˜¯ä»€éº¼?
```

ç„¶å¾Œå‘Šè¨´æˆ‘ AIï¼Œæˆ‘æœƒå¿«é€Ÿè¨ºæ–·ã€‚

---

## å¸¸è¦‹å•é¡Œå’Œè§£æ±ºæ–¹æ¡ˆ

### âŒ å•é¡Œ 1: ã€Œæ‰¾ä¸åˆ°æ¸¬è©¦ã€(No tests executed!)

**ç—‡ç‹€**:
```
PHPUnit 9.6.31 by Sebastian Bergmann
No tests executed!
```

**å¯èƒ½åŸå› **:
1. æ¸¬è©¦æ–‡ä»¶å‘½åä¸å°
2. æ¸¬è©¦æ–‡ä»¶ä½ç½®ä¸å°
3. bootstrap æ–‡ä»¶é…ç½®éŒ¯èª¤

**æª¢æŸ¥æ¸…å–®**:
```
âœ“ æ¸¬è©¦æ–‡ä»¶å‘½åæ˜¯å¦ç‚º *Test.php?
  - âœ— ProductServiceBasicTest.php (æ­£ç¢º)
  - âŒ TestProductServiceBasic.php (éŒ¯èª¤)

âœ“ æ¸¬è©¦æ–‡ä»¶ä½ç½®æ˜¯å¦åœ¨ tests/ ä¸‹?
  - âœ“ tests/Unit/Services/ProductServiceBasicTest.php (æ­£ç¢º)

âœ“ æ¸¬è©¦é¡æ˜¯å¦ç¹¼æ‰¿ TestCase?
  - class ProductServiceBasicTest extends TestCase

âœ“ æ¸¬è©¦æ–¹æ³•æ˜¯å¦ä»¥ test é–‹é ­?
  - public function testCalculateDiscount() // âœ“ æ­£ç¢º
  - public function calculateDiscountTest() // âŒ éŒ¯èª¤
```

**å¿«é€Ÿä¿®å¾©**:
```bash
# 1. æª¢æŸ¥æ–‡ä»¶
ls -la tests/Unit/Services/

# 2. æª¢æŸ¥æ–‡ä»¶å‘½å
# ç¢ºä¿æ˜¯ *Test.php

# 3. é‡æ–°åŸ·è¡Œ
composer test
```

---

### âŒ å•é¡Œ 2: ã€ŒClass not foundã€

**ç—‡ç‹€**:
```
PHP Fatal error: Class not found: BuyGoPlus\Services\ProductService
```

**å¯èƒ½åŸå› **:
1. PSR-4 autoload é…ç½®éŒ¯èª¤
2. å‘½åç©ºé–“ä¸åŒ¹é…
3. composer dumpautoload æ²’æœ‰åŸ·è¡Œ

**æª¢æŸ¥æ¸…å–®**:
```
âœ“ composer.json çš„ autoload é…ç½®
  {
    "autoload": {
      "psr-4": {
        "BuyGoPlus\\": "includes/"
      }
    }
  }

âœ“ é¡æ–‡ä»¶çš„å‘½åç©ºé–“
  namespace BuyGoPlus\Services;
  class ProductService { ... }

âœ“ æ–‡ä»¶ä½ç½®
  includes/services/class-product-service.php
  âœ“ ä½ç½®å¿…é ˆåŒ¹é… PSR-4 é…ç½®

âœ“ æ–‡ä»¶æ˜¯å¦è¢« include äº†
```

**å¿«é€Ÿä¿®å¾©**:
```bash
# 1. é‡æ–°ç”Ÿæˆ autoload
composer dump-autoload

# 2. æ¸…é™¤ vendor ä¸¦é‡æ–°å®‰è£
rm -rf vendor/ composer.lock
composer install

# 3. é‡æ–°åŸ·è¡Œæ¸¬è©¦
composer test
```

---

### âŒ å•é¡Œ 3: ã€Œæµ‹è¯•å¤±è´¥ã€(AssertionError)

**ç—‡ç‹€**:
```
FAIL ProductServiceBasicTest::testCalculateDiscount
AssertionError: expected 95 but got 100
```

**å¯èƒ½åŸå› **:
1. ä»£ç¢¼é‚è¼¯æ”¹è®Šäº†
2. æ¸¬è©¦å‡è¨­ä¸å°
3. é‚Šç•Œå€¼æ²’æœ‰è€ƒæ…®

**è¨ºæ–·æ­¥é©Ÿ**:
```
1. çœ‹æ¸¬è©¦ä»£ç¢¼
   - æ¸¬è©¦åœ¨åšä»€éº¼?
   - é æœŸå€¼æ˜¯ä»€éº¼?

2. çœ‹å¯¦ç¾ä»£ç¢¼
   - å¯¦ç¾çš„é‚è¼¯æ˜¯ä»€éº¼?
   - æ˜¯å¦èˆ‡é æœŸä¸€è‡´?

3. æ‰‹å‹•è¨ˆç®—
   - æ ¹æ“šé‚è¼¯ï¼Œæ‡‰è©²å¾—åˆ°ä»€éº¼çµæœ?
   - æ˜¯å¦èˆ‡é æœŸåŒ¹é…?
```

**ä¿®å¾©æ–¹æ³•**:
```
é¸é … 1: ä»£ç¢¼é‚è¼¯æœ‰å•é¡Œ â†’ ä¿®å¾©å¯¦ç¾ä»£ç¢¼
é¸é … 2: æ¸¬è©¦é æœŸä¸å° â†’ ä¿®å¾©æ¸¬è©¦
é¸é … 3: å…©å€‹éƒ½ä¸å° â†’ è¨è«–æ­£ç¢ºçš„è¡Œç‚º
```

**ä¾‹å­**:
```php
// æ¸¬è©¦
$this->assertEquals(95, $service->calculateDiscount(100, 0.05));

// å¯¦ç¾
public function calculateDiscount($price, $discount) {
    return $price * (1 - $discount);
}

// é©—ç®—: 100 * (1 - 0.05) = 95 âœ“ å°çš„

// å¦‚æœæ¸¬è©¦å¤±æ•—ï¼ŒæŸ¥çœ‹å¯¦ç¾æ˜¯å¦æ”¹è®Š
```

**å¿«é€Ÿä¿®å¾©**:
```bash
# 1. æŸ¥çœ‹æœ€è¿‘çš„æ”¹è®Š
git diff includes/

# 2. æŸ¥çœ‹æ˜¯å¦æœ‰æœªæäº¤çš„æ”¹è®Š
git status

# 3. å¦‚æœæ”¹è®Šçœ‹èµ·ä¾†ä¸å°ï¼Œå›æ»¾
git checkout includes/services/class-product-service.php

# 4. é‡æ–°åŸ·è¡Œæ¸¬è©¦
composer test
```

---

### âŒ å•é¡Œ 4: ã€Œæ‰¾ä¸åˆ° mysqlã€

**ç—‡ç‹€**:
```
Connection refused to MySQL socket
```

**å¯èƒ½åŸå› **:
1. Local by Flywheel æ²’æœ‰é–‹å•Ÿ
2. MySQL socket è·¯å¾‘æ”¹è®Š
3. é…ç½®æŒ‡å‘äº†éŒ¯èª¤çš„ä½ç½®

**æª¢æŸ¥æ¸…å–®**:
```
âœ“ Local by Flywheel æ˜¯å¦é–‹å•Ÿ?
  - æ‰“é–‹ Local æ‡‰ç”¨
  - ç¢ºèª WordPress ç«™é»åœ¨é‹è¡Œ

âœ“ MySQL socket æ˜¯å¦æ­£ç¢º?
  - æ‡‰è©²åœ¨: /Users/fishtv/Library/Application Support/Local/...
  - ä½¿ç”¨ setup-test-db.php æ‰¾åˆ°æ­£ç¢ºä½ç½®
```

**å¿«é€Ÿä¿®å¾©**:
```bash
# 1. æª¢æŸ¥ phpunit-unit.xml ä¸­çš„é…ç½®
grep "DB_HOST" phpunit-unit.xml

# 2. ç¢ºèª Local by Flywheel é‹è¡Œ
open -a "Local"

# 3. é‹è¡Œ setup-test-db.php è‡ªå‹•æª¢æ¸¬
php bin/setup-test-db.php

# 4. é‡æ–°åŸ·è¡Œæ¸¬è©¦
composer test
```

---

### âŒ å•é¡Œ 5: ã€Œæ‰¾ä¸åˆ° Composerã€

**ç—‡ç‹€**:
```
composer: command not found
```

**å¯èƒ½åŸå› **:
1. Composer æ²’æœ‰å…¨å±€å®‰è£
2. PATH é…ç½®ä¸å°

**å¿«é€Ÿä¿®å¾©**:
```bash
# 1. æª¢æŸ¥ Composer ä½ç½®
which composer

# 2. å¦‚æœæ²’æœ‰æ‰¾åˆ°ï¼Œå®‰è£
brew install composer

# 3. é©—è­‰å®‰è£
composer --version

# 4. é€²å…¥é …ç›®ç›®éŒ„é‡è©¦
cd /Users/fishtv/Development/buygo-plus-one
composer test
```

---

### âŒ å•é¡Œ 6: ã€ŒGit ç›¸é—œéŒ¯èª¤ã€

**ç—‡ç‹€ 6a: ã€ŒNot a git repositoryã€**
```
fatal: not a git repository
```

**åŸå› **: ä¸åœ¨ git é …ç›®ç›®éŒ„å…§

**ä¿®å¾©**:
```bash
# 1. ç¢ºèªåœ¨æ­£ç¢ºçš„ç›®éŒ„
pwd
# æ‡‰è©²è¼¸å‡º: /Users/fishtv/Development/buygo-plus-one

# 2. åˆå§‹åŒ– git (å¦‚æœéœ€è¦)
git init

# 3. é…ç½® git (å¦‚æœå‰›åˆå§‹åŒ–)
git config user.email "you@example.com"
git config user.name "Your Name"

# 4. é‡è©¦
git status
```

**ç—‡ç‹€ 6b: ã€ŒMerge conflictã€**
```
Auto-merging includes/services/class-product-service.php
CONFLICT (content merge): Merge conflict in ...
```

**åŸå› **: å¤šäººç·¨è¼¯åŒä¸€æ–‡ä»¶å°è‡´è¡çª

**ä¿®å¾©æ­¥é©Ÿ**:
```bash
# 1. æŸ¥çœ‹è¡çªæ–‡ä»¶
git status

# 2. æ‰“é–‹è¡çªæ–‡ä»¶ï¼Œæ‰¾åˆ°è¡çªæ¨™è¨˜
<<<<<<< HEAD
// ä½ çš„æ”¹è®Š
=======
// åˆ¥äººçš„æ”¹è®Š
>>>>>>> branch-name

# 3. æ‰‹å‹•è§£æ±ºè¡çª
# - æ±ºå®šä¿ç•™å“ªä¸€éƒ¨åˆ†
# - æˆ–åˆä½µå…©éƒ¨åˆ†

# 4. æ¨™è¨˜å·²è§£æ±º
git add includes/services/class-product-service.php

# 5. å®Œæˆåˆä½µ
git commit -m "Resolve merge conflict"
```

---

## é€²éšè¨ºæ–·

### å ´æ™¯ A: æ¸¬è©¦æœ‰æ™‚é€šéï¼Œæœ‰æ™‚å¤±æ•—

**å¯èƒ½åŸå› **:
- ä»£ç¢¼ä¾è³´æ–¼æ™‚é–“/éš¨æ©Ÿæ€§
- æ•¸æ“šåº«ç‹€æ…‹ä¸ä¸€è‡´
- æ¸¬è©¦é †åºæœ‰å•é¡Œ

**è¨ºæ–·**:
```bash
# 1. å¤šæ¬¡é‹è¡Œæ¸¬è©¦
for i in {1..5}; do composer test; done

# 2. æŸ¥çœ‹å“ªå€‹æ¸¬è©¦ä¸ç©©å®š
# è¨˜ä¸‹å¤±æ•—çš„æ¸¬è©¦åç¨±

# 3. å–®ç¨é‹è¡Œè©²æ¸¬è©¦
composer test -- --filter "testName"

# 4. æŸ¥çœ‹æ¸¬è©¦ä»£ç¢¼å’Œå¯¦ç¾ä»£ç¢¼
# æ‰¾å‡ºä¾è³´æ–¼æ™‚é–“/éš¨æ©Ÿæ€§çš„åœ°æ–¹
```

---

### å ´æ™¯ B: æ–°å¤–æ›æ¸¬è©¦å¤±æ•—

**æª¢æŸ¥æ¸…å–®**:
```
âœ“ .plugin-testing/ å­˜åœ¨?
âœ“ è¤‡è£½äº†æ­£ç¢ºçš„æ¨¡æ¿?
âœ“ composer install åŸ·è¡Œäº†?
âœ“ bootstrap-unit.php æ­£ç¢º?
âœ“ å‘½åç©ºé–“è¨­ç½®æ­£ç¢º?
âœ“ PSR-4 autoload é…ç½®æ­£ç¢º?
```

**å¿«é€Ÿé‡å»º**:
```bash
# 1. é€²å…¥æ–°å¤–æ›
cd /Users/fishtv/Development/new-plugin

# 2. æ¸…ç©º vendor å’Œ lock
rm -rf vendor/ composer.lock

# 3. é‡æ–°å®‰è£
composer install

# 4. ç”Ÿæˆ autoload
composer dump-autoload

# 5. åŸ·è¡Œæ¸¬è©¦
composer test
```

---

### å ´æ™¯ C: æ•´å€‹é …ç›®ç„¡æ³•åŸ·è¡Œ

**å®Œæ•´è¨ºæ–·**:
```bash
# 1. æª¢æŸ¥æ ¹ç›®éŒ„
pwd
# æ‡‰è©²æ˜¯: /Users/fishtv/Development

# 2. åˆ—å‡ºç›®éŒ„å…§å®¹
ls -la
# æ‡‰è©²çœ‹åˆ° .plugin-testing/ã€buygo-plus-one/ ç­‰

# 3. æª¢æŸ¥ .plugin-testing
ls -la .plugin-testing/
# æ‡‰è©²æœ‰: docs/ã€scripts/ã€templates/ ç­‰

# 4. é€²å…¥å¤–æ›
cd buygo-plus-one

# 5. æª¢æŸ¥ composer.json
cat composer.json | grep -A 5 "autoload"

# 6. æª¢æŸ¥ vendor
ls -la vendor/ | head

# 7. å˜—è©¦åŸ·è¡Œæ¸¬è©¦
composer test

# 8. å¦‚æœé‚„æ˜¯ä¸è¡Œ
rm -rf vendor/ composer.lock
composer install
composer test
```

---

## å¸¸ç”¨æ¢å¾©å‘½ä»¤

### å›æ»¾ä»£ç¢¼

```bash
# å›æ»¾æœ€å¾Œä¸€æ¬¡æäº¤
git reset --hard HEAD~1

# å›æ»¾åˆ°ç‰¹å®šæäº¤
git reset --hard abc1234

# å›æ»¾ç‰¹å®šæ–‡ä»¶
git checkout includes/services/class-product-service.php

# æŸ¥çœ‹å¯ä»¥å›æ»¾åˆ°çš„åœ°æ–¹
git log --oneline -10
```

### æ¸…æ½”ç’°å¢ƒ

```bash
# ç§»é™¤æ‰€æœ‰æœªè¿½è¹¤çš„æ–‡ä»¶ï¼ˆè¬¹æ…ï¼ï¼‰
git clean -fd

# ç§»é™¤æ‰€æœ‰æ”¹è®Šï¼ˆè¬¹æ…ï¼ï¼‰
git reset --hard

# æ¸…ç©º vendor å’Œä¾è³´
rm -rf vendor/ composer.lock
composer install
```

### æŸ¥çœ‹ç‹€æ…‹

```bash
# æŸ¥çœ‹æ”¹è®Š
git status
git diff

# æŸ¥çœ‹æäº¤æ­·å²
git log --oneline -10

# æŸ¥çœ‹ç‰¹å®šæäº¤çš„æ”¹è®Š
git show abc1234

# æŸ¥çœ‹èª°æ”¹äº†ä»€éº¼
git blame includes/services/class-product-service.php
```

---

## ä½•æ™‚æ±‚åŠ©

å¦‚æœé‡åˆ°ä»¥ä¸‹æƒ…æ³ï¼Œç›´æ¥å‘Šè¨´æˆ‘ AIï¼š

âœ… **ç›´æ¥å‘Šè¨´æˆ‘**:
- ã€ŒåŸ·è¡Œ composer test å‡ºéŒ¯ï¼ŒéŒ¯èª¤æ˜¯...ã€
- ã€Œæ¸¬è©¦å¤±æ•—äº†ï¼ŒAssertionError...ã€
- ã€Œæˆ‘æ”¹äº†ä»£ç¢¼ï¼Œç¾åœ¨ç„¡æ³•åŸ·è¡Œã€
- ã€Œæœ‰ä»€éº¼è¾¦æ³•æ¢å¾©å—ï¼Ÿã€

âœ… **æä¾›èƒŒæ™¯ä¿¡æ¯**:
- ã€Œæˆ‘ä¿®æ”¹äº†ä»€éº¼ã€
- ã€Œæœ€å¾Œä¸€æ¬¡æˆåŠŸæ˜¯ä»€éº¼æ™‚å€™ã€
- ã€Œæ”¹è®Šå¾Œç™¼ç”Ÿäº†ä»€éº¼ã€

âœ… **æä¾›éŒ¯èª¤è¨Šæ¯**:
```
æŠŠå®Œæ•´çš„éŒ¯èª¤è¨Šæ¯è¤‡è£½çµ¦æˆ‘
åŒ…æ‹¬å †æ£§è·Ÿè¹¤ (Stack trace)
```

---

## é é˜²æ€§æªæ–½

### å»ºç«‹å¥½ç¿’æ…£

```
1. ä¿®æ”¹å‰åŸ·è¡Œæ¸¬è©¦
   composer test

2. ä¿®æ”¹å¾Œç«‹å³åŸ·è¡Œæ¸¬è©¦
   composer test

3. æ¸¬è©¦é€šéå¾Œå‚™ä»½
   git add .
   git commit -m "æè¿°ä½ çš„æ”¹è®Š"

4. å®šæœŸæª¢æŸ¥
   git log --oneline -10
   git status
```

### å®šæœŸç¶­è­·

```bash
# æ¯å‘¨ä¸€æ¬¡
# 1. æ›´æ–°ä¾è³´
composer update

# 2. åŸ·è¡Œæ‰€æœ‰å¤–æ›æ¸¬è©¦
composer test

# 3. æª¢æŸ¥ä»£ç¢¼ç‹€æ…‹
git status
git log --oneline -5
```

---

## åƒè€ƒè³‡æº

| å•é¡Œé¡å‹ | åƒè€ƒæ–‡ä»¶ |
|---------|---------|
| å·¥ä½œæµç¨‹ | 01-å®Œæ•´æ“ä½œæŒ‡å—.md |
| AI æºé€š | 02-èˆ‡AIå”ä½œ.md |
| å‘½ä»¤åƒè€ƒ | QUICK-REFERENCE.md |
| æ¸¬è©¦æœ€ä½³å¯¦è¸ | buygo-plus-one/TESTING.md |

---

## è¨˜ä½é€™äº›

âœ… **é‡åˆ°å•é¡Œæ™‚**:
- ä¿æŒå†·éœ
- æè¿°ç™¼ç”Ÿäº†ä»€éº¼
- æä¾›éŒ¯èª¤è¨Šæ¯
- å‘Šè¨´æˆ‘æ”¹è®Šäº†ä»€éº¼

âŒ **ä¸è¦**:
- ç›²ç›®åˆªé™¤æ–‡ä»¶
- ä¸æ€è€ƒå°±åŸ·è¡Œ git reset
- éš±è—éŒ¯èª¤è¨Šæ¯
- å‡è¨­ä½ çŸ¥é“å•é¡Œæ‰€åœ¨

**æœ€é‡è¦**: ä»»ä½•æ™‚å€™éƒ½å¯ä»¥å›æ»¾ã€‚ä¸è¦æ€•æ”¹è®Šã€‚

---

**æœ‰å•é¡Œï¼Œç›´æ¥å•æˆ‘ã€‚æˆ‘æœƒå¹«ä½ å¿«é€Ÿè¨ºæ–·å’Œä¿®å¾©ã€‚** ğŸš€
