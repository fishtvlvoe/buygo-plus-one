# 🤖 與 AI 協作指南

## 目錄

1. [核心理念](#核心理念)
2. [最佳溝通模式](#最佳溝通模式)
3. [常見指令模式](#常見指令模式)
4. [信息提供方式](#信息提供方式)
5. [錯誤恢復](#錯誤恢復)
6. [多外掛工作流程](#多外掛工作流程)
7. [高級用法](#高級用法)

---

## 核心理念

### AI 的工作方式

```
你的需求
    ↓
AI 自動理解上下文
    ↓
AI 檢查環境
    ↓
AI 執行操作
    ↓
AI 驗證結果
    ↓
AI 報告並建議下一步
```

**關鍵點**: 你不需要告訴 AI 用什麼命令，只需要說「我想做什麼」

### AI 會自動做的事

```
✓ 找到你的根目錄
✓ 掃描所有外掛
✓ 理解每個外掛的結構
✓ 找到配置文件
✓ 執行正確的測試
✓ 分析測試結果
✓ 提出修復建議
✓ 安全地備份代碼
```

### 你需要提供的信息

```
✗ 不需要告訴我命令
✗ 不需要告訴我文件路徑
✗ 不需要告訴我怎麼操作
✓ 只需要告訴我你的目標
```

---

## 最佳溝通模式

### 模式 1: 簡單直述

**效果最好的方式**:

```
「測試 buygo-plus-one」
「我修改了 ProductService」
「新增一個 payment 外掛」
「所有外掛都測試」
```

**AI 收到後會自動**:
1. 進入根目錄 (`/Users/fishtv/Development`)
2. 掃描項目結構
3. 定位相關文件
4. 執行必要操作
5. 報告結果

---

### 模式 2: 提供上下文

**當你的需求複雜時**:

```
「我想修改 buygo-plus-one 的計價邏輯，
 目前在 ProductService 的 calculatePrice 方法。
 修改會增加一個 discount 參數。
 幫我測試並備份。」
```

**AI 會**:
1. 讀取相關代碼
2. 理解改變的影響
3. 執行相關測試
4. 識別受影響的測試用例
5. 提出修復建議

---

### 模式 3: 明確問題

**當遇到問題時**:

```
「測試失敗了，報錯是:
 AssertionError: expected 100 but got 95」

「我修改後，ProductServiceBasicTest 的
 discount 測試開始失敗」
```

**AI 會**:
1. 分析錯誤訊息
2. 查看相關代碼
3. 識別根本原因
4. 提出修復方案
5. 驗證修復

---

## 常見指令模式

### 測試相關

```
「測試 buygo-plus-one」
→ 執行該外掛的所有測試

「測試所有外掛」
→ 依次測試每個外掛，彙整結果

「只測試 ProductService」
→ 執行特定服務的測試

「測試並顯示覆蓋率」
→ 執行測試並生成覆蓋率報告
```

### 代碼修改

```
「我修改了代碼，驗證一下」
→ 檢測改變、執行測試、詢問備份

「我改了計價邏輯」
→ 查找相關文件、分析改變、建議修復

「代碼有問題，幫我找」
→ 掃描代碼、運行測試、識別問題
```

### 新增外掛

```
「新增外掛 shipping-calculator」
→ 完整初始化，可開始開發

「新增一個叫 payment-gateway 的外掛」
→ 相同處理
```

### 備份和版本控制

```
「備份現在的狀態」
→ 執行 git commit

「回滾到上一個版本」
→ git reset --hard HEAD~1

「查看歷史」
→ git log --oneline
```

### 信息查詢

```
「現在有哪些外掛」
→ 列出所有外掛

「buygo-plus-one 的測試狀態」
→ 執行測試並報告

「顯示所有備份點」
→ git log --oneline -20
```

---

## 信息提供方式

### 最有效的信息提供

**最好: 用自然語言描述你的需求**
```
「我想為 ProductService 添加一個新方法來計算
 訂單中所有商品的總價，包括稅費。
 幫我寫測試並驗證。」
```

**很好: 提供具體文件和行號**
```
「ProductService 的 calculatePrice 方法（第 45-60 行）
 需要添加一個 $tax 參數。
 我已經修改了，幫我測試。」
```

**可以: 提供代碼片段**
```
「我改的代碼:
 public function calculatePrice($items, $discount = 0) {
   // ...新增折扣邏輯
 }
 這個改變會不會影響現有測試？」
```

---

### 提供上下文時

**告訴 AI 為什麼這樣改**:
```
「為什麼要改: 支持訂單折扣功能
 改在哪: ProductService::calculatePrice
 預期影響: 4 個依賴的測試需要更新
 要我幫你更新嗎?」
```

**告訴 AI 你的目標**:
```
「目標: 增加 50% 的測試覆蓋率
 計劃: 為所有 Service 類寫完整的邊界測試
 現在先寫 ProductService 的
 幫我寫並驗證」
```

---

## 錯誤恢復

### 測試失敗時

**清晰的錯誤報告**:
```
「測試失敗:
 FAIL ProductServiceBasicTest::testCalculateDiscount
 AssertionError: expected 95 but got 100

 我改了 calculatePrice 方法，加了 discount 邏輯。
 現在的測試預期是錯的還是我的邏輯有問題？」
```

**AI 會**:
1. 讀取測試代碼
2. 讀取實現代碼
3. 識別不匹配處
4. 提出修復方案
5. 幫你驗證

---

### 環境問題時

**描述症狀**:
```
「執行 composer test 出錯:
 PHP Fatal error: Class not found: BuyGoPlus\Services\ProductService

 我剛創建了新外掛，發生了什麼？」
```

**AI 會**:
1. 檢查 composer.json 配置
2. 檢查 PSR-4 autoload
3. 檢查命名空間
4. 提出修復步驟

---

### 修復不確定時

**請求驗證**:
```
「我想這樣修復測試:
 改變 discount 的計算方式從 $price * $discount
 改成 $price - $discount

 這樣合理嗎？要不要改？」
```

**AI 會**:
1. 分析修改的邏輯
2. 檢查是否符合需求
3. 驗證不會破壞其他測試
4. 執行修改並驗證

---

## 多外掛工作流程

### 場景 1: 並行開發多個外掛

**你的工作**:
```
「今天的計劃:
 1. 修改 buygo-plus-one 的計價邏輯
 2. 為 payment-gateway 添加 Stripe 集成
 3. 新建 shipping-calculator 外掛

 幫我管理這三個任務」
```

**AI 會**:
1. 為每個外掛創建隔離的工作環境
2. 獨立執行測試
3. 分別備份代碼
4. 提供進度報告

---

### 場景 2: 跨外掛代碼共享

**你的需求**:
```
「ProductService 在 buygo-plus-one 中。
 payment-gateway 也需要用它。
 怎麼設置共享？」
```

**AI 會**:
1. 分析代碼結構
2. 提出共享方案（Composer 或程式碼提取）
3. 實現共享方案
4. 驗證所有測試仍然通過

---

### 場景 3: 統一測試所有外掛

**簡單指令**:
```
「測試所有外掛」
```

**AI 會**:
1. 掃描 /Users/fishtv/Development/ 的所有外掛
2. 進入每個外掛，執行 composer test
3. 收集所有結果
4. 生成統一報告

**報告格式**:
```
外掛測試報告 (2024-01-21)
===========================

✅ buygo-plus-one
   7/7 tests passed

✅ payment-gateway
   12/12 tests passed

✅ shipping-calculator
   5/5 tests passed

總結: 24/24 測試通過 ✓
```

---

## 高級用法

### 持續集成風格

**批量操作指令**:
```
「現在給我做完整的工作流:
 1. 測試所有外掛
 2. 檢查是否有失敗
 3. 如果有失敗，分析原因
 4. 提出修復建議
 5. 等待我的指示修復還是回滾」
```

**AI 會執行完整的 CI 風格的工作流**

---

### 代碼審查風格

**請求代碼檢查**:
```
「幫我審查 buygo-plus-one 的最新改變:
 - 代碼質量?
 - 測試覆蓋度?
 - 性能問題?
 - 安全問題?
 - 建議?」
```

**AI 會**:
1. 查看 git diff
2. 分析代碼質量
3. 檢查測試覆蓋
4. 識別問題
5. 提出改進建議

---

### 學習式對話

**探索性問題**:
```
「為什麼我們要為 Service 類寫測試?
 如何寫一個好的測試?
 我現在的測試缺少什麼?」
```

**AI 會**:
1. 解釋測試的重要性
2. 示範最佳實踐
3. 分析你的現有測試
4. 提出改進建議

---

## 溝通技巧總結

| 情況 | 怎麼說 | 效果 |
|------|-------|------|
| 簡單任務 | 直接說需求 | 最快 |
| 複雜任務 | 說目標+上下文 | 準確 |
| 有問題 | 描述症狀+猜想 | 快速排查 |
| 需要建議 | 說你的想法 | AI可驗證 |
| 多任務 | 按優先級列出 | 有序進行 |

---

## 記住這些

✅ **做這些**:
- 用自然語言描述你的需求
- 在需要時提供文件和行號
- 描述你修改的目的
- 告訴我錯誤訊息
- 提出你的想法和建議

❌ **不要做這些**:
- 不要給 AI 一堆命令
- 不要假設 AI 知道文件位置
- 不要隱藏錯誤訊息
- 不要期待 AI 猜測你的想法
- 不要忘記上下文

---

## 下一步

現在你已經了解如何與 AI 協作：

1. **立即試試**
   - 打開 `/Users/fishtv/Development/`
   - 簡單地告訴我要做什麼
   - 看看我如何自動處理

2. **探索用法**
   - 試試上面的各種指令模式
   - 看看 AI 如何理解你的需求
   - 找到最適合你的溝通方式

3. **深化協作**
   - 參考 `01-完整操作指南.md` 了解詳細流程
   - 參考 `03-故障排除.md` 處理問題
   - 根據需要調整工作流程

**最重要的**: 直接告訴我你想做什麼。其他的事情交給我。

---

**祝你開發愉快！** 🚀

任何問題，直接問我。我會根據你的需求調整協作方式。
