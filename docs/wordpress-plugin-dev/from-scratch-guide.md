# WordPress å¤–æ›å¾é›¶é–‹å§‹é–‹ç™¼æŒ‡å—

> **ç›®æ¨™å—çœ¾**: AI é–‹ç™¼åŠ©æ‰‹ + äººé¡é–‹ç™¼è€…
> **é©ç”¨å ´æ™¯**: å¾é›¶é–‹å§‹å»ºç«‹ä¸€å€‹é«˜å“è³ªã€å¯ç¶­è­·çš„ WordPress å¤–æ›
> **åƒè€ƒå°ˆæ¡ˆ**: BuyGo+1 (æœ¬å¤–æ›å³ç‚ºæœ€ä½³å¯¦è¸ç¯„ä¾‹)

---

## ğŸ“‹ ç›®éŒ„

1. [é–‹ç™¼å‰æº–å‚™](#é–‹ç™¼å‰æº–å‚™)
2. [å°ˆæ¡ˆåˆå§‹åŒ–](#å°ˆæ¡ˆåˆå§‹åŒ–)
3. [æ¶æ§‹è¨­è¨ˆ](#æ¶æ§‹è¨­è¨ˆ)
4. [æ ¸å¿ƒåŠŸèƒ½å¯¦ä½œ](#æ ¸å¿ƒåŠŸèƒ½å¯¦ä½œ)
5. [å‰ç«¯é–‹ç™¼](#å‰ç«¯é–‹ç™¼)
6. [å®‰å…¨æ€§](#å®‰å…¨æ€§)
7. [æ¸¬è©¦èˆ‡é™¤éŒ¯](#æ¸¬è©¦èˆ‡é™¤éŒ¯)
8. [æ–‡æª”èˆ‡äº¤ä»˜](#æ–‡æª”èˆ‡äº¤ä»˜)
9. [å¸¸è¦‹å•é¡Œ](#å¸¸è¦‹å•é¡Œ)

---

## é–‹ç™¼å‰æº–å‚™

### Step 1: éœ€æ±‚åˆ†æ

#### å¿…é ˆå›ç­”çš„å•é¡Œ

```markdown
## å¤–æ›åŸºæœ¬è³‡è¨Š
- [ ] å¤–æ›åç¨±æ˜¯ä»€éº¼ï¼Ÿ
- [ ] ä¸»è¦åŠŸèƒ½æ˜¯ä»€éº¼ï¼Ÿï¼ˆåˆ—å‡º 3-5 å€‹æ ¸å¿ƒåŠŸèƒ½ï¼‰
- [ ] ç›®æ¨™ç”¨æˆ¶æ˜¯èª°ï¼Ÿï¼ˆç®¡ç†å“¡ã€ç·¨è¼¯è€…ã€è¨‚é–±è€…ï¼Ÿï¼‰
- [ ] æ˜¯å¦éœ€è¦è³‡æ–™åº«ï¼Ÿéœ€è¦å¹¾å¼µè¡¨ï¼Ÿ

## æŠ€è¡“éœ€æ±‚
- [ ] éœ€è¦å‰ç«¯ UI å—ï¼Ÿï¼ˆVueã€Reactã€ç´” JSï¼Ÿï¼‰
- [ ] éœ€è¦ REST API å—ï¼Ÿ
- [ ] éœ€è¦èˆ‡ç¬¬ä¸‰æ–¹æœå‹™æ•´åˆå—ï¼Ÿï¼ˆLINEã€æ”¯ä»˜ã€Emailï¼Ÿï¼‰
- [ ] éœ€è¦å®šæ™‚ä»»å‹™å—ï¼Ÿï¼ˆWP-Cronï¼Ÿï¼‰

## è¦æ¨¡è©•ä¼°
- [ ] é ä¼°ä»£ç¢¼é‡ï¼Ÿï¼ˆ< 5000 è¡Œï¼šå°å‹ï¼Œ5000-15000ï¼šä¸­å‹ï¼Œ> 15000ï¼šå¤§å‹ï¼‰
- [ ] é ä¼°é–‹ç™¼æ™‚é–“ï¼Ÿ
- [ ] éœ€è¦å¤šäººå”ä½œå—ï¼Ÿ
```

### Step 2: æŠ€è¡“é¸å‹

#### å¤–æ›æ¶æ§‹é¸æ“‡

| å°ˆæ¡ˆè¦æ¨¡ | å»ºè­°æ¶æ§‹ | ç¯„ä¾‹ |
|---------|---------|------|
| **å°å‹** (< 5000 è¡Œ) | å–®ä¸€ PHP æª”æ¡ˆ + ç°¡å–®çµæ§‹ | Hello Dolly |
| **ä¸­å‹** (5000-15000 è¡Œ) | WordPress Plugin Boilerplate | **BuyGo+1** â­ |
| **å¤§å‹** (> 15000 è¡Œ) | è‡ªå®šç¾©æ¡†æ¶ + Composer | WooCommerce |

**å»ºè­°**: 99% çš„æƒ…æ³ä¸‹ä½¿ç”¨ **WordPress Plugin Boilerplate**

#### å‰ç«¯æŠ€è¡“é¸æ“‡

| éœ€æ±‚ | æŠ€è¡“ | å„ªé» | ç¼ºé» |
|------|------|------|------|
| **ç°¡å–®è¡¨å–®** | ç´” HTML + jQuery | ç°¡å–®ã€è¼•é‡ | é›£ä»¥ç¶­è­·å¤§å‹ UI |
| **äº’å‹•å¼ UI** | Vue 3 | è¼•é‡ã€æ˜“å­¸ã€éŸ¿æ‡‰å¼ | éœ€è¦å­¸ç¿’æˆæœ¬ |
| **è¤‡é›œæ‡‰ç”¨** | React | ç”Ÿæ…‹è±å¯Œã€å¼·å¤§ | é«”ç©è¼ƒå¤§ã€è¤‡é›œ |

**å»ºè­°**: ä½¿ç”¨ **Vue 3**ï¼ˆå¦‚ BuyGo+1ï¼‰

### Step 3: é–‹ç™¼ç’°å¢ƒè¨­ç½®

#### å¿…å‚™å·¥å…·

```bash
# 1. Local by Flywheel (æ¨è–¦) æˆ– XAMPP
# 2. IDE: VSCode + PHP Intelephense
# 3. Git ç‰ˆæœ¬æ§åˆ¶
# 4. WP-CLI (é¸æ“‡æ€§ï¼Œä½†å¼·çƒˆå»ºè­°)

# å®‰è£ WP-CLI
brew install wp-cli  # macOS
curl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar  # Linux
```

#### é–‹ç™¼ç”¨æ’ä»¶

```bash
# ä½¿ç”¨ WP-CLI å®‰è£é–‹ç™¼å¿…å‚™æ’ä»¶
wp plugin install query-monitor --activate  # é™¤éŒ¯å·¥å…·
wp plugin install debug-bar --activate       # é™¤éŒ¯é¢æ¿
```

---

## å°ˆæ¡ˆåˆå§‹åŒ–

### Step 1: ä½¿ç”¨ WordPress Plugin Boilerplate

#### 1.1 ä¸‹è¼‰ Boilerplate

```bash
# æ–¹æ³• 1: ä½¿ç”¨ç”Ÿæˆå™¨ (æ¨è–¦)
# è¨ªå•: https://wppb.me/
# å¡«å¯«å¤–æ›è³‡è¨Šï¼Œä¸‹è¼‰ zip

# æ–¹æ³• 2: å…‹éš† GitHub å€‰åº«
git clone https://github.com/DevinVinson/WordPress-Plugin-Boilerplate.git my-plugin
cd my-plugin
```

#### 1.2 è‡ªå®šç¾©å¤–æ›è³‡è¨Š

ä¿®æ”¹ä»¥ä¸‹æª”æ¡ˆä¸­çš„ä½”ä½ç¬¦ï¼š

```bash
# éœ€è¦æ›¿æ›çš„ä½”ä½ç¬¦
Plugin Name â†’ Your Plugin Name
plugin-name â†’ your-plugin-slug
Plugin_Name â†’ Your_Plugin_Name
PLUGIN_NAME â†’ YOUR_PLUGIN_NAME
```

**å·¥å…·**: ä½¿ç”¨ find-and-replace å·¥å…·æ‰¹é‡æ›¿æ›

```bash
# macOS/Linux ç¯„ä¾‹
find . -type f -name "*.php" -exec sed -i '' 's/plugin-name/buygo-plus-one/g' {} +
```

### Step 2: å»ºç«‹åŸºç¤çµæ§‹

#### æ¨™æº–ç›®éŒ„çµæ§‹

```
your-plugin/
â”œâ”€â”€ your-plugin.php              # ä¸»å…¥å£æª”æ¡ˆ
â”œâ”€â”€ includes/                    # PHP æ ¸å¿ƒä»£ç¢¼
â”‚   â”œâ”€â”€ class-your-plugin.php   # ä¸»é¡åˆ¥
â”‚   â”œâ”€â”€ class-loader.php        # Hook åŠ è¼‰å™¨
â”‚   â”œâ”€â”€ class-activator.php     # å•Ÿç”¨è™•ç†
â”‚   â”œâ”€â”€ class-deactivator.php   # åœç”¨è™•ç†
â”‚   â”œâ”€â”€ services/               # æ¥­å‹™é‚è¼¯å±¤ â­
â”‚   â”‚   â””â”€â”€ class-*-service.php
â”‚   â”œâ”€â”€ api/                    # REST API å±¤ â­
â”‚   â”‚   â””â”€â”€ class-*-api.php
â”‚   â””â”€â”€ views/                  # å‰ç«¯è³‡æº â­
â”‚       â”œâ”€â”€ composables/        # Vue Composables
â”‚       â””â”€â”€ components/         # å…±äº«çµ„ä»¶
â”œâ”€â”€ admin/                      # å¾Œå°ç®¡ç†
â”‚   â”œâ”€â”€ class-admin.php        # å¾Œå°é¡åˆ¥
â”‚   â”œâ”€â”€ css/                   # CSS æª”æ¡ˆ
â”‚   â”œâ”€â”€ js/                    # JavaScript æª”æ¡ˆ
â”‚   â”‚   â””â”€â”€ components/        # Vue çµ„ä»¶
â”‚   â””â”€â”€ partials/              # é é¢æ¨¡æ¿
â”œâ”€â”€ public/                    # å‰å°
â”‚   â”œâ”€â”€ class-public.php
â”‚   â”œâ”€â”€ css/
â”‚   â””â”€â”€ js/
â”œâ”€â”€ assets/                    # å…±ç”¨è³‡æº
â”œâ”€â”€ languages/                 # å¤šèªè¨€
â”œâ”€â”€ docs/                      # æ–‡æª”
â”‚   â”œâ”€â”€ development/          # é–‹ç™¼æ–‡æª”
â”‚   â”œâ”€â”€ planning/             # è¨ˆç•«æ–‡æª”
â”‚   â”œâ”€â”€ bugfix/               # Bug ä¿®å¾©è¨˜éŒ„
â”‚   â””â”€â”€ testing/              # æ¸¬è©¦æ–‡æª”
â”œâ”€â”€ scripts/                  # è‡ªå‹•åŒ–è…³æœ¬
â”œâ”€â”€ templates/                # ä»£ç¢¼ç¯„æœ¬
â””â”€â”€ tests/                    # æ¸¬è©¦æª”æ¡ˆ
```

### Step 3: åˆå§‹åŒ– Git å€‰åº«

```bash
# 1. åˆå§‹åŒ– Git
git init

# 2. å»ºç«‹ .gitignore
cat > .gitignore << 'EOF'
# WordPress
wp-config.php
wp-content/uploads/
wp-content/cache/

# IDE
.vscode/
.idea/

# Dependencies
node_modules/
vendor/

# Build
build/
*.zip

# Logs
*.log
.DS_Store
EOF

# 3. é¦–æ¬¡æäº¤
git add .
git commit -m "chore: åˆå§‹åŒ–å¤–æ›çµæ§‹

- ä½¿ç”¨ WordPress Plugin Boilerplate
- å»ºç«‹åŸºç¤ç›®éŒ„çµæ§‹
- è¨­ç½® Git ç‰ˆæœ¬æ§åˆ¶

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"
```

---

## æ¶æ§‹è¨­è¨ˆ

### æ ¸å¿ƒè¨­è¨ˆåŸå‰‡

#### 1. å–®ä¾‹æ¨¡å¼ (Singleton Pattern)

**ç‚ºä»€éº¼éœ€è¦**: ç¢ºä¿æœå‹™å±¤åªæœ‰ä¸€å€‹å¯¦ä¾‹ï¼Œé¿å…é‡è¤‡åˆå§‹åŒ–

**å¯¦ä½œç¯„ä¾‹**:

```php
<?php
/**
 * å•†å“æœå‹™å±¤
 */
class Product_Service {

    private static $instance = null;

    /**
     * å–å¾—å¯¦ä¾‹
     */
    public static function getInstance() {
        if (null === self::$instance) {
            self::$instance = new self();
        }
        return self::$instance;
    }

    /**
     * ç§æœ‰å»ºæ§‹å‡½æ•¸ï¼ˆé˜²æ­¢å¤–éƒ¨å¯¦ä¾‹åŒ–ï¼‰
     */
    private function __construct() {
        // åˆå§‹åŒ–é‚è¼¯
    }

    /**
     * é˜²æ­¢å…‹éš†
     */
    private function __clone() {}

    /**
     * é˜²æ­¢ååºåˆ—åŒ–
     */
    public function __wakeup() {
        throw new Exception("Cannot unserialize singleton");
    }
}

// ä½¿ç”¨æ–¹å¼
$product_service = Product_Service::getInstance();
```

#### 2. è·è²¬åˆ†é›¢ (Separation of Concerns)

| å±¤ç´š | è·è²¬ | ç¦æ­¢äº‹é … |
|------|------|---------|
| **Admin / Public** | UI æ¸²æŸ“ã€ç”¨æˆ¶äº¤äº’ | âŒ ç›´æ¥è³‡æ–™åº«æ“ä½œ |
| **API** | æ¥æ”¶è«‹æ±‚ã€è¿”å›è³‡æ–™ | âŒ æ¥­å‹™é‚è¼¯è™•ç† |
| **Service** | æ¥­å‹™é‚è¼¯ã€è³‡æ–™è™•ç† | âŒ ç›´æ¥è¼¸å‡º HTML |
| **Database** | è³‡æ–™æŒä¹…åŒ– | âŒ æ¥­å‹™é‚è¼¯ |

**éŒ¯èª¤ç¯„ä¾‹** âŒ:

```php
// åœ¨ Admin é¡åˆ¥ä¸­ç›´æ¥æ“ä½œè³‡æ–™åº«ï¼ˆé•åè·è²¬åˆ†é›¢ï¼‰
class Admin {
    public function display_products() {
        global $wpdb;
        $products = $wpdb->get_results("SELECT * FROM wp_products"); // âŒ
        // ...
    }
}
```

**æ­£ç¢ºç¯„ä¾‹** âœ…:

```php
// Admin èª¿ç”¨ Serviceï¼ŒService è™•ç†è³‡æ–™åº«
class Admin {
    public function display_products() {
        $service = Product_Service::getInstance();
        $products = $service->getAllProducts(); // âœ…
        // ...
    }
}

class Product_Service {
    public function getAllProducts() {
        global $wpdb;
        return $wpdb->get_results("SELECT * FROM wp_products");
    }
}
```

#### 3. REST API å„ªå…ˆ

**ç‚ºä»€éº¼**:
- å‰å¾Œç«¯è§£è€¦
- æ”¯æ´ç¬¬ä¸‰æ–¹æ•´åˆ
- æ›´å¥½çš„æ¸¬è©¦æ€§

**å¯¦ä½œæ­¥é©Ÿ**:

```php
<?php
/**
 * å•†å“ API ç«¯é»
 */
class Products_API extends WP_REST_Controller {

    public function register_routes() {
        register_rest_route('your-plugin/v1', '/products', array(
            'methods'             => 'GET',
            'callback'            => array($this, 'get_items'),
            'permission_callback' => array($this, 'get_items_permissions_check'),
        ));
    }

    public function get_items($request) {
        $service = Product_Service::getInstance();
        $products = $service->getAllProducts();

        return rest_ensure_response($products);
    }

    public function get_items_permissions_check($request) {
        return current_user_can('edit_posts');
    }
}
```

### è³‡æ–™åº«è¨­è¨ˆ

#### å»ºè¡¨åŸå‰‡

```php
// includes/class-activator.php

public static function activate() {
    global $wpdb;
    $charset_collate = $wpdb->get_charset_collate();

    // è¡¨åä½¿ç”¨å¤–æ›å‰ç¶´
    $table_name = $wpdb->prefix . 'yourplugin_products';

    $sql = "CREATE TABLE $table_name (
        id bigint(20) NOT NULL AUTO_INCREMENT,
        name varchar(255) NOT NULL,
        sku varchar(100) DEFAULT '',
        price decimal(10,2) DEFAULT 0.00,
        quantity int(11) DEFAULT 0,
        created_at datetime DEFAULT CURRENT_TIMESTAMP,
        updated_at datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
        PRIMARY KEY  (id),
        KEY sku (sku),
        KEY created_at (created_at)
    ) $charset_collate;";

    require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
    dbDelta($sql);

    // è¨˜éŒ„è³‡æ–™åº«ç‰ˆæœ¬
    add_option('yourplugin_db_version', '1.0');
}
```

**è¨­è¨ˆè¦ç¯„**:
- âœ… è¡¨åä½¿ç”¨å¤–æ›å‰ç¶´ (`yourplugin_`)
- âœ… ä¸»éµå¿…é ˆæ˜¯ `id bigint(20) AUTO_INCREMENT`
- âœ… æ·»åŠ å¿…è¦çš„ç´¢å¼• (KEY)
- âœ… æ™‚é–“æ¬„ä½ä½¿ç”¨ `datetime` ä¸¦è¨­ç½®é è¨­å€¼
- âœ… ä½¿ç”¨ `dbDelta()` è€Œéç›´æ¥åŸ·è¡Œ SQL

---

## æ ¸å¿ƒåŠŸèƒ½å¯¦ä½œ

### å»ºç«‹æœå‹™å±¤

#### ç¯„æœ¬: Service Template

```php
<?php
/**
 * {Entity} Service
 *
 * è™•ç† {entity} ç›¸é—œçš„æ¥­å‹™é‚è¼¯
 */
class {Entity}_Service {

    private static $instance = null;

    public static function getInstance() {
        if (null === self::$instance) {
            self::$instance = new self();
        }
        return self::$instance;
    }

    private function __construct() {}

    /**
     * å–å¾—æ‰€æœ‰ {entities}
     *
     * @return array|false
     */
    public function getAll() {
        global $wpdb;
        $table = $wpdb->prefix . 'yourplugin_{entities}';

        try {
            $results = $wpdb->get_results("SELECT * FROM {$table}");

            if ($wpdb->last_error) {
                throw new Exception($wpdb->last_error);
            }

            return $results;

        } catch (Exception $e) {
            error_log('Service Error: ' . $e->getMessage());
            return false;
        }
    }

    /**
     * æ ¹æ“š ID å–å¾—å–®ç­†è³‡æ–™
     *
     * @param int $id
     * @return object|false
     */
    public function getById($id) {
        if (empty($id) || !is_numeric($id)) {
            return false;
        }

        global $wpdb;
        $table = $wpdb->prefix . 'yourplugin_{entities}';

        try {
            $result = $wpdb->get_row($wpdb->prepare(
                "SELECT * FROM {$table} WHERE id = %d",
                $id
            ));

            if ($wpdb->last_error) {
                throw new Exception($wpdb->last_error);
            }

            return $result;

        } catch (Exception $e) {
            error_log('Service Error: ' . $e->getMessage());
            return false;
        }
    }

    /**
     * å»ºç«‹æ–°è³‡æ–™
     *
     * @param array $data
     * @return int|false æ–°è³‡æ–™çš„ IDï¼Œå¤±æ•—è¿”å› false
     */
    public function create($data) {
        if (empty($data)) {
            return false;
        }

        global $wpdb;
        $table = $wpdb->prefix . 'yourplugin_{entities}';

        try {
            $wpdb->insert($table, $data);

            if ($wpdb->last_error) {
                throw new Exception($wpdb->last_error);
            }

            return $wpdb->insert_id;

        } catch (Exception $e) {
            error_log('Service Error: ' . $e->getMessage());
            return false;
        }
    }

    /**
     * æ›´æ–°è³‡æ–™
     *
     * @param int $id
     * @param array $data
     * @return bool
     */
    public function update($id, $data) {
        if (empty($id) || !is_numeric($id) || empty($data)) {
            return false;
        }

        global $wpdb;
        $table = $wpdb->prefix . 'yourplugin_{entities}';

        try {
            $result = $wpdb->update(
                $table,
                $data,
                array('id' => $id)
            );

            if ($wpdb->last_error) {
                throw new Exception($wpdb->last_error);
            }

            return $result !== false;

        } catch (Exception $e) {
            error_log('Service Error: ' . $e->getMessage());
            return false;
        }
    }

    /**
     * åˆªé™¤è³‡æ–™
     *
     * @param int $id
     * @return bool
     */
    public function delete($id) {
        if (empty($id) || !is_numeric($id)) {
            return false;
        }

        global $wpdb;
        $table = $wpdb->prefix . 'yourplugin_{entities}';

        try {
            $result = $wpdb->delete($table, array('id' => $id));

            if ($wpdb->last_error) {
                throw new Exception($wpdb->last_error);
            }

            return $result !== false;

        } catch (Exception $e) {
            error_log('Service Error: ' . $e->getMessage());
            return false;
        }
    }
}
```

### å»ºç«‹ REST API

#### ç¯„æœ¬: API Template

```php
<?php
/**
 * {Entities} API
 *
 * æä¾› {entities} çš„ REST API ç«¯é»
 */
class {Entities}_API extends WP_REST_Controller {

    protected $namespace = 'yourplugin/v1';
    protected $rest_base = '{entities}';

    public function register_routes() {

        // GET /yourplugin/v1/{entities}
        register_rest_route($this->namespace, '/' . $this->rest_base, array(
            array(
                'methods'             => WP_REST_Server::READABLE,
                'callback'            => array($this, 'get_items'),
                'permission_callback' => array($this, 'get_items_permissions_check'),
            ),
        ));

        // GET /yourplugin/v1/{entities}/{id}
        register_rest_route($this->namespace, '/' . $this->rest_base . '/(?P<id>[\d]+)', array(
            array(
                'methods'             => WP_REST_Server::READABLE,
                'callback'            => array($this, 'get_item'),
                'permission_callback' => array($this, 'get_item_permissions_check'),
            ),
        ));

        // POST /yourplugin/v1/{entities}
        register_rest_route($this->namespace, '/' . $this->rest_base, array(
            array(
                'methods'             => WP_REST_Server::CREATABLE,
                'callback'            => array($this, 'create_item'),
                'permission_callback' => array($this, 'create_item_permissions_check'),
            ),
        ));

        // PUT /yourplugin/v1/{entities}/{id}
        register_rest_route($this->namespace, '/' . $this->rest_base . '/(?P<id>[\d]+)', array(
            array(
                'methods'             => WP_REST_Server::EDITABLE,
                'callback'            => array($this, 'update_item'),
                'permission_callback' => array($this, 'update_item_permissions_check'),
            ),
        ));

        // DELETE /yourplugin/v1/{entities}/{id}
        register_rest_route($this->namespace, '/' . $this->rest_base . '/(?P<id>[\d]+)', array(
            array(
                'methods'             => WP_REST_Server::DELETABLE,
                'callback'            => array($this, 'delete_item'),
                'permission_callback' => array($this, 'delete_item_permissions_check'),
            ),
        ));
    }

    /**
     * å–å¾—åˆ—è¡¨
     */
    public function get_items($request) {
        $service = {Entity}_Service::getInstance();
        $items = $service->getAll();

        if ($items === false) {
            return new WP_Error('service_error', 'å–å¾—è³‡æ–™å¤±æ•—', array('status' => 500));
        }

        return rest_ensure_response($items);
    }

    /**
     * å–å¾—å–®ç­†
     */
    public function get_item($request) {
        $id = $request['id'];
        $service = {Entity}_Service::getInstance();
        $item = $service->getById($id);

        if ($item === false) {
            return new WP_Error('not_found', 'æ‰¾ä¸åˆ°è³‡æ–™', array('status' => 404));
        }

        return rest_ensure_response($item);
    }

    /**
     * å»ºç«‹æ–°è³‡æ–™
     */
    public function create_item($request) {
        $data = $request->get_json_params();
        $service = {Entity}_Service::getInstance();
        $id = $service->create($data);

        if ($id === false) {
            return new WP_Error('create_failed', 'å»ºç«‹å¤±æ•—', array('status' => 500));
        }

        return rest_ensure_response(array(
            'success' => true,
            'id' => $id
        ));
    }

    /**
     * æ›´æ–°è³‡æ–™
     */
    public function update_item($request) {
        $id = $request['id'];
        $data = $request->get_json_params();
        $service = {Entity}_Service::getInstance();
        $result = $service->update($id, $data);

        if ($result === false) {
            return new WP_Error('update_failed', 'æ›´æ–°å¤±æ•—', array('status' => 500));
        }

        return rest_ensure_response(array('success' => true));
    }

    /**
     * åˆªé™¤è³‡æ–™
     */
    public function delete_item($request) {
        $id = $request['id'];
        $service = {Entity}_Service::getInstance();
        $result = $service->delete($id);

        if ($result === false) {
            return new WP_Error('delete_failed', 'åˆªé™¤å¤±æ•—', array('status' => 500));
        }

        return rest_ensure_response(array('success' => true));
    }

    /**
     * æ¬Šé™æª¢æŸ¥
     */
    public function get_items_permissions_check($request) {
        return current_user_can('edit_posts');
    }

    public function get_item_permissions_check($request) {
        return current_user_can('edit_posts');
    }

    public function create_item_permissions_check($request) {
        return current_user_can('edit_posts');
    }

    public function update_item_permissions_check($request) {
        return current_user_can('edit_posts');
    }

    public function delete_item_permissions_check($request) {
        return current_user_can('delete_posts');
    }
}
```

---

## å‰ç«¯é–‹ç™¼

### Vue 3 çµ„ä»¶åŒ–æ¶æ§‹

#### é é¢çµæ§‹æ¨™æº–

```php
<?php
/**
 * ç®¡ç†å“¡é é¢ç¯„æœ¬
 *
 * éµå¾ª BuyGo+1 æ¨™æº–çµæ§‹
 */

// å®‰å…¨æª¢æŸ¥
if (!defined('ABSPATH')) {
    exit;
}

// å»ºç«‹ nonce
$nonce = wp_create_nonce('wp_rest');
?>

<div id="app" class="{page-name}-page">
    <!-- é é¦–éƒ¨åˆ†: å›ºå®šåœ¨é ‚éƒ¨ï¼Œä¸å—æª¢è¦–åˆ‡æ›å½±éŸ¿ -->
    <header class="{page-name}-header">
        <div class="flex items-center justify-between">
            <h1 class="text-2xl font-bold">{é é¢æ¨™é¡Œ}</h1>

            <div class="flex items-center gap-4">
                <!-- æœå°‹æ¡† -->
                <?php include BUYGO_PLUS_ONE_PLUGIN_DIR . 'components/shared/smart-search-box.php'; ?>

                <!-- æ“ä½œæŒ‰éˆ• -->
                <button @click="showAddModal" class="btn-primary">
                    æ–°å¢
                </button>
            </div>
        </div>
    </header>

    <!-- å…§å®¹å€åŸŸ: å¯æ»¾å‹•ï¼ŒåŒ…å«æ‰€æœ‰æª¢è¦– -->
    <div class="flex-1 overflow-auto">

        <!-- åˆ—è¡¨æª¢è¦– -->
        <div v-show="currentView === 'list'" class="{page-name}-list">
            <!-- åˆ—è¡¨å…§å®¹ -->
            <table class="{page-name}-table">
                <!-- ... -->
            </table>

            <!-- åˆ†é çµ„ä»¶ -->
            <?php include BUYGO_PLUS_ONE_PLUGIN_DIR . 'components/shared/pagination.php'; ?>
        </div>

        <!-- è©³æƒ…æª¢è¦– -->
        <div v-show="currentView === 'detail'" class="{page-name}-detail">
            <!-- è©³æƒ…å…§å®¹ -->
        </div>

    </div>
</div>

<script>
const { createApp } = Vue;

createApp({
    data() {
        return {
            // Nonce (å¿…é ˆåœ¨ return ä¸­)
            wpNonce: '<?php echo $nonce; ?>',

            // æª¢è¦–ç‹€æ…‹
            currentView: 'list',

            // è³‡æ–™
            items: [],
            currentItem: null,

            // UI ç‹€æ…‹
            loading: false,
        };
    },

    methods: {
        async loadData() {
            this.loading = true;

            try {
                const response = await fetch('/wp-json/yourplugin/v1/{entities}', {
                    headers: {
                        'X-WP-Nonce': this.wpNonce
                    }
                });

                if (!response.ok) {
                    throw new Error('API è«‹æ±‚å¤±æ•—');
                }

                this.items = await response.json();

            } catch (error) {
                console.error('è¼‰å…¥è³‡æ–™å¤±æ•—:', error);
                alert('è¼‰å…¥è³‡æ–™å¤±æ•—');
            } finally {
                this.loading = false;
            }
        },

        showDetail(item) {
            this.currentItem = item;
            this.currentView = 'detail';
        },

        backToList() {
            this.currentView = 'list';
        },
    },

    mounted() {
        this.loadData();
    }
}).mount('#app');
</script>

<style>
/* ä½¿ç”¨é é¢å‰ç¶´é¿å…è¡çª */
.{page-name}-page { }
.{page-name}-header { }
.{page-name}-list { }
.{page-name}-table { }
</style>
```

### CSS éš”é›¢ç­–ç•¥

#### å‘½åè¦ç¯„

```css
/* âœ… æ­£ç¢ºï¼šä½¿ç”¨é é¢å‰ç¶´ */
.products-page { }
.products-header { }
.products-modal { }
.products-card { }
.products-table { }

/* âŒ éŒ¯èª¤ï¼šé€šç”¨åç¨±æœƒè¡çª */
.page { }
.header { }
.modal { }
.card { }
.table { }
```

#### æå–åˆ°ç¨ç«‹æª”æ¡ˆ

```php
// åœ¨ admin/class-admin.php ä¸­è¼‰å…¥

public function enqueue_styles() {
    $screen = get_current_screen();

    if ($screen->id === 'toplevel_page_your-plugin-products') {
        wp_enqueue_style(
            'your-plugin-products',
            plugin_dir_url(__FILE__) . 'css/products.css',
            array(),
            $this->version
        );
    }
}
```

---

## å®‰å…¨æ€§

### 1. Nonce é©—è­‰

#### å¾Œå°è¡¨å–®

```php
<!-- è¡¨å–®ä¸­åŠ å…¥ nonce -->
<form method="post">
    <?php wp_nonce_field('your_plugin_action', 'your_plugin_nonce'); ?>
    <!-- è¡¨å–®æ¬„ä½ -->
</form>

<?php
// è™•ç†è¡¨å–®æ™‚é©—è­‰
if (isset($_POST['your_plugin_nonce'])) {
    if (!wp_verify_nonce($_POST['your_plugin_nonce'], 'your_plugin_action')) {
        wp_die('å®‰å…¨é©—è­‰å¤±æ•—');
    }

    // è™•ç†è¡¨å–®
}
?>
```

#### REST API

```javascript
// å‰ç«¯: åœ¨ fetch è«‹æ±‚ä¸­åŠ å…¥ nonce
const wpNonce = '<?php echo wp_create_nonce("wp_rest"); ?>';

fetch('/wp-json/yourplugin/v1/items', {
    headers: {
        'X-WP-Nonce': wpNonce
    }
});
```

```php
// å¾Œç«¯: WordPress è‡ªå‹•é©—è­‰ nonce
// åªéœ€ç¢ºä¿ permission_callback æ­£ç¢ºè¨­ç½®
'permission_callback' => function() {
    return current_user_can('edit_posts');
}
```

### 2. è³‡æ–™æ¸…ç†èˆ‡é©—è­‰

```php
// è¼¸å…¥é©—è­‰
$name = sanitize_text_field($_POST['name']);
$email = sanitize_email($_POST['email']);
$content = wp_kses_post($_POST['content']); // å…è¨±éƒ¨åˆ† HTML

// è¼¸å‡ºè½‰ç¾©
echo esc_html($user_input);           // ç´”æ–‡å­—
echo esc_attr($attribute_value);      // HTML å±¬æ€§
echo esc_url($url);                   // URL
echo wp_kses_post($html_content);     // HTML å…§å®¹
```

### 3. SQL æ³¨å…¥é˜²è­·

```php
// âœ… æ­£ç¢ºï¼šä½¿ç”¨ prepare()
$wpdb->get_results($wpdb->prepare(
    "SELECT * FROM {$table} WHERE id = %d AND name = %s",
    $id,
    $name
));

// âŒ éŒ¯èª¤ï¼šç›´æ¥æ‹¼æ¥ SQL
$wpdb->get_results("SELECT * FROM {$table} WHERE id = {$id}");
```

### 4. CSRF é˜²è­·

```php
// æª¢æŸ¥ referer
check_admin_referer('your_plugin_action', 'your_plugin_nonce');

// æˆ–ä½¿ç”¨ REST API çš„è‡ªå‹• nonce é©—è­‰
```

---

## æ¸¬è©¦èˆ‡é™¤éŒ¯

### é™¤éŒ¯å·¥å…·

#### 1. WordPress Debug æ¨¡å¼

```php
// wp-config.php

define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
```

#### 2. æ—¥èªŒè¨˜éŒ„

```php
// è¨˜éŒ„åˆ° debug.log
error_log('Debug message: ' . print_r($data, true));

// å»ºç«‹è‡ªå®šç¾©æ—¥èªŒ
if (!function_exists('your_plugin_log')) {
    function your_plugin_log($message) {
        $log_file = WP_CONTENT_DIR . '/your-plugin.log';
        $timestamp = date('Y-m-d H:i:s');
        file_put_contents($log_file, "[{$timestamp}] {$message}\n", FILE_APPEND);
    }
}
```

#### 3. API æ¸¬è©¦

```bash
# ä½¿ç”¨ WP-CLI æ¸¬è©¦ API
wp rest list

# ä½¿ç”¨ curl æ¸¬è©¦ç«¯é»
curl -X GET "http://yoursite.local/wp-json/yourplugin/v1/items" \
     -H "X-WP-Nonce: YOUR_NONCE"
```

### è‡ªå‹•åŒ–æ¸¬è©¦ (é¸æ“‡æ€§)

```bash
# å®‰è£ PHPUnit
composer require --dev phpunit/phpunit

# å»ºç«‹æ¸¬è©¦æª”æ¡ˆ
# tests/test-product-service.php

class Test_Product_Service extends WP_UnitTestCase {

    public function test_get_all_products() {
        $service = Product_Service::getInstance();
        $products = $service->getAll();

        $this->assertIsArray($products);
    }
}

# åŸ·è¡Œæ¸¬è©¦
./vendor/bin/phpunit
```

---

## æ–‡æª”èˆ‡äº¤ä»˜

### å¿…å‚™æ–‡æª”

#### 1. README.md

```markdown
# Your Plugin Name

ç°¡çŸ­æè¿°å¤–æ›åŠŸèƒ½

## åŠŸèƒ½ç‰¹æ€§

- åŠŸèƒ½ 1
- åŠŸèƒ½ 2
- åŠŸèƒ½ 3

## å®‰è£

1. ä¸Šå‚³åˆ° `/wp-content/plugins/`
2. å•Ÿç”¨å¤–æ›
3. è¨ªå•è¨­å®šé é¢

## ä½¿ç”¨æ–¹æ³•

...

## ç³»çµ±éœ€æ±‚

- PHP 7.4+
- WordPress 5.8+
- MySQL 5.6+

## æˆæ¬Š

GPL v2 æˆ–æ›´æ–°ç‰ˆæœ¬
```

#### 2. CODING-STANDARDS.md

åƒè€ƒ BuyGo+1 çš„ [docs/development/CODING-STANDARDS.md](../development/CODING-STANDARDS.md)

#### 3. CHANGELOG.md

```markdown
# æ›´æ–°æ—¥èªŒ

## [1.0.0] - 2026-01-24

### æ–°å¢
- åˆå§‹ç‰ˆæœ¬ç™¼å¸ƒ
- å•†å“ç®¡ç†åŠŸèƒ½
- REST API æ”¯æ´

### ä¿®å¾©
- N/A

### è®Šæ›´
- N/A
```

### æ‰“åŒ…ç™¼å¸ƒ

#### å»ºç«‹ build è…³æœ¬

```bash
#!/bin/bash
# scripts/build-production.sh

VERSION="1.0.0"
PLUGIN_NAME="your-plugin"
OUTPUT_FILE="${PLUGIN_NAME}-${VERSION}.zip"

# æ’é™¤é–‹ç™¼æª”æ¡ˆ
rsync -av \
    --exclude='.git/' \
    --exclude='node_modules/' \
    --exclude='vendor/' \
    --exclude='tests/' \
    --exclude='docs/' \
    --exclude='scripts/' \
    --exclude='*.zip' \
    ./ build/${PLUGIN_NAME}/

# å»ºç«‹ zip
cd build
zip -r ../${OUTPUT_FILE} ${PLUGIN_NAME}
cd ..

echo "âœ“ å®Œæˆ: ${OUTPUT_FILE}"
```

---

## å¸¸è¦‹å•é¡Œ

### Q1: å¦‚ä½•è™•ç†å¤§é‡è³‡æ–™ï¼Ÿ

**A**: ä½¿ç”¨åˆ†é å’Œå¿«å–

```php
public function getAll($page = 1, $per_page = 20) {
    $offset = ($page - 1) * $per_page;

    global $wpdb;
    $results = $wpdb->get_results($wpdb->prepare(
        "SELECT * FROM {$table} LIMIT %d OFFSET %d",
        $per_page,
        $offset
    ));

    // å¿«å–çµæœ (15 åˆ†é˜)
    wp_cache_set("items_page_{$page}", $results, 'your-plugin', 900);

    return $results;
}
```

### Q2: å¦‚ä½•æ•´åˆç¬¬ä¸‰æ–¹ APIï¼Ÿ

**A**: ä½¿ç”¨ `wp_remote_post()` / `wp_remote_get()`

```php
$response = wp_remote_post('https://api.example.com/endpoint', array(
    'headers' => array(
        'Authorization' => 'Bearer ' . $api_key,
        'Content-Type' => 'application/json',
    ),
    'body' => json_encode($data),
    'timeout' => 30,
));

if (is_wp_error($response)) {
    error_log('API Error: ' . $response->get_error_message());
    return false;
}

$body = json_decode(wp_remote_retrieve_body($response), true);
```

### Q3: å¦‚ä½•è™•ç†å¤šèªè¨€ï¼Ÿ

**A**: ä½¿ç”¨ WordPress i18n ç³»çµ±

```php
// åœ¨ä¸»æª”æ¡ˆä¸­è¼‰å…¥æ–‡å­—åŸŸ
load_plugin_textdomain('your-plugin', false, dirname(plugin_basename(__FILE__)) . '/languages');

// åœ¨ä»£ç¢¼ä¸­ä½¿ç”¨
__('Text to translate', 'your-plugin');
_e('Text to echo', 'your-plugin');
```

---

## ç¸½çµ

### é–‹ç™¼æª¢æŸ¥æ¸…å–®

å®Œæˆä»¥ä¸‹æ‰€æœ‰é …ç›®ï¼Œä½ å°±æœ‰ä¸€å€‹é«˜å“è³ªçš„ WordPress å¤–æ›ï¼š

#### æ¶æ§‹ âœ“
- [ ] ä½¿ç”¨ WordPress Plugin Boilerplate
- [ ] å¯¦ä½œå–®ä¾‹æ¨¡å¼
- [ ] è·è²¬åˆ†é›¢æ¸…æ™°
- [ ] REST API å®Œæ•´

#### å®‰å…¨æ€§ âœ“
- [ ] æ‰€æœ‰è¡¨å–®æœ‰ nonce é©—è­‰
- [ ] æ‰€æœ‰ API æœ‰æ¬Šé™æª¢æŸ¥
- [ ] æ‰€æœ‰ SQL ä½¿ç”¨ prepare()
- [ ] æ‰€æœ‰è¼¸å‡ºä½¿ç”¨è½‰ç¾©å‡½æ•¸

#### ä»£ç¢¼å“è³ª âœ“
- [ ] æœå‹™å±¤æœ‰éŒ¯èª¤è™•ç†
- [ ] åƒæ•¸é©—è­‰å®Œæ•´
- [ ] æ—¥èªŒè¨˜éŒ„æ¸…æ™°
- [ ] éµå¾ª WordPress Coding Standards

#### æ–‡æª” âœ“
- [ ] README.md æ¸…æ™°
- [ ] CODING-STANDARDS.md å®Œæ•´
- [ ] CHANGELOG.md æ›´æ–°
- [ ] ä»£ç¢¼è¨»è§£å……åˆ†

#### æ¸¬è©¦ âœ“
- [ ] æ‰‹å‹•æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½
- [ ] æ¸¬è©¦éŒ¯èª¤è™•ç†
- [ ] æ¸¬è©¦æ¬Šé™æ§åˆ¶
- [ ] (é¸æ“‡æ€§) è‡ªå‹•åŒ–æ¸¬è©¦

### ä¸‹ä¸€æ­¥

1. **åƒè€ƒ BuyGo+1 åŸå§‹ç¢¼**: é€™æ˜¯æœ€ä½³å¯¦è¸ç¯„ä¾‹
2. **é–±è®€ WordPress Codex**: https://codex.wordpress.org/
3. **åŠ å…¥ç¤¾ç¾¤**: WordPress Stack Exchange, Facebook Groups

---

**æ–‡æª”ç¶­è­·è€…**: BuyGo Development Team
**æœ€å¾Œæ›´æ–°**: 2026-01-24
**åƒè€ƒå°ˆæ¡ˆ**: BuyGo+1 v0.03
