---
phase: 38-角色權限頁面-ui-重構
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - includes/admin/class-settings-page.php
  - admin/js/admin-settings.js
  - admin/css/admin-settings.css
autonomous: true

must_haves:
  truths:
    - "賣家類型欄位在列表中完全消失"
    - "發送綁定連結按鈕在操作欄位中完全消失"
    - "buygo_seller_type user meta 仍保留在資料庫中（不刪除）"
  artifacts:
    - path: "includes/admin/class-settings-page.php"
      provides: "移除賣家類型欄位和發送綁定按鈕"
      contains: "移除"
  key_links:
    - from: "render_roles_tab()"
      to: "table HTML"
      via: "PHP conditional rendering"
      pattern: "seller-type|send-binding"
---

<objective>
欄位隱藏與移除：移除賣家類型欄位和發送綁定按鈕，簡化 UI

Purpose: 簡化角色權限頁面，移除不再使用的功能（賣家類型、發送綁定）
Output: 更簡潔的角色權限列表，只保留必要欄位
</objective>

<execution_context>
@/Users/fishtv/.claude/get-shit-done/workflows/execute-plan.md
@/Users/fishtv/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@/Users/fishtv/Development/buygo-plus-one-dev/.planning/STATE.md
@/Users/fishtv/Development/buygo-plus-one-dev/.planning/ROADMAP.md
@/Users/fishtv/Development/buygo-plus-one-dev/.planning/REQUIREMENTS.md
@/Users/fishtv/Development/buygo-plus-one-dev/includes/admin/class-settings-page.php (lines 654-935)
@/Users/fishtv/Development/buygo-plus-one-dev/admin/js/admin-settings.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: 移除賣家類型欄位（PHP）</name>
  <files>includes/admin/class-settings-page.php</files>
  <action>
在 `render_roles_tab()` 方法中進行以下修改：

1. **移除表頭中的「賣家類型」欄位**（約 line 804）：

找到：
```html
<th>賣家類型</th>
```
刪除這一行。

2. **移除表格內容中的賣家類型下拉選單**（約 line 834-839）：

找到並刪除整個 `<td>` 區塊：
```php
<td>
    <select class="seller-type-select" data-user-id="<?php echo esc_attr($user['id']); ?>" style="font-size: 12px;">
        <option value="test" <?php selected($user['seller_type'], 'test'); ?>>測試賣家</option>
        <option value="real" <?php selected($user['seller_type'], 'real'); ?>>真實賣家</option>
    </select>
</td>
```

**重要**：不要移除 PHP 程式碼中讀取 `seller_type` 的邏輯（約 line 718-722），因為 `buygo_seller_type` user meta 仍需保留在系統中，只是不顯示。
  </action>
  <verify>
```bash
cd /Users/fishtv/Development/buygo-plus-one-dev && php -l includes/admin/class-settings-page.php
```
  </verify>
  <done>表格中「賣家類型」欄位完全消失（表頭和內容都移除）</done>
</task>

<task type="auto">
  <name>Task 2: 移除發送綁定連結按鈕（PHP）</name>
  <files>includes/admin/class-settings-page.php</files>
  <action>
在 `render_roles_tab()` 方法中進行以下修改：

**移除操作欄位中的「發送綁定連結」按鈕**（約 line 859-862）：

找到並刪除這整個 `<?php if ... endif; ?>` 區塊：
```php
<?php if (!$user['is_bound']): ?>
    <button type="button" class="button button-secondary send-binding-link" data-user-id="<?php echo esc_attr($user['id']); ?>" style="font-size: 12px; padding: 6px 12px; height: auto; line-height: 1.4;">
        發送綁定連結
    </button>
<?php endif; ?>
```

操作欄位現在只會顯示「移除」按鈕（對於非 WordPress 管理員）。
  </action>
  <verify>
```bash
cd /Users/fishtv/Development/buygo-plus-one-dev && php -l includes/admin/class-settings-page.php
```
  </verify>
  <done>操作欄位只有「移除」按鈕，沒有「發送綁定連結」按鈕</done>
</task>

<task type="auto">
  <name>Task 3: 清理 JavaScript 和 CSS 中的相關程式碼</name>
  <files>admin/js/admin-settings.js, admin/css/admin-settings.css</files>
  <action>
1. **在 admin/js/admin-settings.js 中移除賣家類型切換邏輯**（約 line 237-299）：

找到並刪除整個區塊：
```javascript
// 賣家類型切換
$('.seller-type-select').on('change', function() {
    // ... 整個 change 事件處理器
});
```

2. **移除發送綁定連結的事件處理器**（約 line 148-188）：

找到並刪除整個區塊：
```javascript
// 發送綁定連結
$(document).on('click', '.send-binding-link', function() {
    // ... 整個 click 事件處理器
});
```

3. **在 admin/css/admin-settings.css 中移除相關樣式**（約 line 78-88）：

找到並刪除：
```css
.wp-list-table .button.send-binding-link {
    background: #2271b1 !important;
    color: white !important;
    border-color: #2271b1 !important;
    min-width: auto;
}

.wp-list-table .button.send-binding-link:hover {
    background: #135e96 !important;
    border-color: #135e96 !important;
}
```
  </action>
  <verify>
```bash
cd /Users/fishtv/Development/buygo-plus-one-dev && cat admin/js/admin-settings.js | grep -c "seller-type-select"
# 應該返回 0

cd /Users/fishtv/Development/buygo-plus-one-dev && cat admin/js/admin-settings.js | grep -c "send-binding-link"
# 應該返回 0
```
  </verify>
  <done>JavaScript 和 CSS 中不再有賣家類型切換和發送綁定的程式碼</done>
</task>

</tasks>

<verification>
1. PHP 語法檢查通過
2. 表格中沒有「賣家類型」欄位
3. 操作欄位沒有「發送綁定連結」按鈕
4. JavaScript 中沒有 `.seller-type-select` 和 `.send-binding-link` 相關程式碼
5. `buygo_seller_type` user meta 仍保留在資料庫中（不刪除）
</verification>

<success_criteria>
- UI-03 完成：賣家類型欄位完全隱藏（但 user meta 保留）
- UI-04 完成：發送綁定按鈕移除
</success_criteria>

<output>
After completion, create `.planning/phases/38-角色權限頁面-ui-重構/38-02-SUMMARY.md`
</output>
