---
phase: 11-按鈕與狀態標籤遷移
plan: 05
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - admin/partials/products.php
autonomous: true

must_haves:
  truths:
    - "批次刪除按鈕使用 .btn .btn-danger classes"
    - "手機版卡片操作按鈕（分配/編輯/刪除）使用 .btn classes"
    - "狀態切換按鈕使用 .status-tag 外觀但保持 <button> 元素（互動式狀態切換）"
    - "子頁面按鈕（取消/儲存）使用 .btn classes"
    - "Grid View 不遷移（Phase 10 決策）"
    - "桌面版表格 icon-only 按鈕保持現狀（不遷移）"
    - "所有 Vue directives 保持不變"
  artifacts:
    - path: "admin/partials/products.php"
      provides: "遷移後的按鈕和狀態標籤"
      contains: "btn btn-"
  key_links:
    - from: "admin/partials/products.php"
      to: "design-system/components/button.css"
      via: "CSS class"
      pattern: "btn btn-primary|btn btn-secondary|btn btn-danger"

# 遷移範圍明確說明
#
# 已遷移:
#   - 批次刪除按鈕 (Header 區域)
#   - 手機版卡片操作按鈕 (分配/編輯/刪除)
#   - 狀態切換按鈕 (桌面版和手機版 Table View)
#   - 子頁面頁尾按鈕 (取消/儲存)
#
# 未遷移 (保持現狀):
#   - 桌面版表格 icon-only 按鈕 (分配/編輯/刪除 icons)
#   - Grid View 所有元素 (Phase 10 決策)
#   - 分配 icon 三疊設計 (延後至後續 phase，不在 Phase 11 範圍)
---

<objective>
遷移 products.php 的按鈕和狀態標籤到設計系統

Purpose: 統一商品頁面的按鈕和狀態樣式
Output: 更新後的 products.php，使用設計系統 classes
</objective>

<execution_context>
@/Users/fishtv/.claude/get-shit-done/workflows/execute-plan.md
@/Users/fishtv/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@admin/partials/products.php
@design-system/components/button.css
@design-system/components/status-tag.css
@.planning/phases/11-按鈕與狀態標籤遷移/11-CONTEXT.md
@.planning/phases/11-按鈕與狀態標籤遷移/11-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: 遷移批次刪除按鈕</name>
  <files>admin/partials/products.php</files>
  <action>
找到並替換 Header 區域的批次刪除按鈕（line ~66）：

**批次刪除按鈕**:
- Before: `class="px-3 py-1.5 bg-red-50 text-red-600 rounded-lg text-xs font-medium hover:bg-red-100 border border-red-200 transition"`
- After: `class="btn btn-danger btn-sm"`
- 保留 `@click="batchDelete"`
  </action>
  <verify>
```bash
grep -n "batchDelete" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/products.php | head -3
```
  </verify>
  <done>批次刪除按鈕已遷移到 btn btn-danger</done>
</task>

<task type="auto">
  <name>Task 2: 遷移狀態切換按鈕（互動式）</name>
  <files>admin/partials/products.php</files>
  <action>
找到並替換狀態切換按鈕。

**重要澄清**：這是「互動式狀態切換按鈕」，不是「純顯示狀態標籤」。
- 點擊可切換商品的上架/下架狀態
- 必須保持 `<button>` 元素（可點擊）
- 但使用 .status-tag 的視覺外觀

**桌面版 Table View 狀態切換按鈕**:

Before:
```html
<button @click="toggleStatus(product)"
        :class="product.status === 'published' ? 'bg-green-100 text-green-800 border-green-200' : 'bg-slate-100 text-slate-800 border-slate-200'"
        class="px-2.5 py-1 text-xs font-semibold rounded-full border hover:opacity-80 transition cursor-pointer">
    {{ product.status === 'published' ? '已上架' : '已下架' }}
</button>
```

After:
```html
<button @click="toggleStatus(product)"
        :class="product.status === 'published' ? 'status-tag-success' : 'status-tag-neutral'"
        class="status-tag cursor-pointer hover:opacity-80 transition"
        style="pointer-events: auto;">
    {{ product.status === 'published' ? '已上架' : '已下架' }}
</button>
```

**手機版 Table View 卡片狀態切換**: 同樣邏輯

**注意**：
- 保持 `<button>` 元素
- 添加 `style="pointer-events: auto;"` 覆蓋 .status-tag 的 pointer-events: none
- Grid View 狀態標籤不遷移（Phase 10 決策）

根據 CONTEXT.md 顏色語義：
- published (已上架) → status-tag-success (綠色)
- draft (已下架) → status-tag-neutral (灰色)
  </action>
  <verify>
```bash
# 確認狀態切換按鈕已遷移
grep -n "toggleStatus" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/products.php | head -5

# 確認 status-tag classes 已添加
grep -c "status-tag-success\|status-tag-neutral" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/products.php
```
  </verify>
  <done>狀態切換按鈕已遷移為 status-tag 視覺外觀（保持 button 元素）</done>
</task>

<task type="auto">
  <name>Task 3: 遷移手機版卡片操作按鈕（並驗證桌面版未修改）</name>
  <files>admin/partials/products.php</files>
  <action>
找到並替換手機版 Table View 卡片的操作按鈕（grid-cols-3 布局區域）：

1. **分配按鈕**:
   - Before: `class="py-3 flex items-center justify-center gap-1.5 text-blue-600 hover:bg-blue-50 bg-white transition active:bg-blue-100"`
   - After: `class="btn btn-primary flex-1 py-3"`
   - 保留文字和 icon

2. **編輯按鈕**:
   - Before: `class="py-3 flex items-center justify-center gap-1.5 text-slate-600 hover:bg-slate-50 bg-white transition active:bg-slate-100"`
   - After: `class="btn btn-secondary flex-1 py-3"`

3. **刪除按鈕**:
   - Before: `class="py-3 flex items-center justify-center gap-1.5 text-red-500 hover:bg-red-50 bg-white transition active:bg-red-100"`
   - After: `class="btn btn-danger flex-1 py-3"`

**注意**：這些按鈕在 grid-cols-3 布局中，需要保持 flex-1 讓它們平均分配寬度。

**桌面版表格 icon-only 按鈕**（分配、編輯、刪除）：**不遷移**。這些按鈕使用純 icon 設計，有其自身設計語言。

**分配 icon 三疊設計**：CONTEXT.md 提到的特殊 icon 設計**延後至後續 phase**，不在 Phase 11 範圍。
  </action>
  <verify>
```bash
# 驗證手機版卡片按鈕容器存在且已遷移
grep -n "grid-cols-3.*divide-x" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/products.php | head -3

# 驗證桌面版表格 icon-only 按鈕未被修改（應該還有 inline Tailwind）
# 桌面版操作欄通常在 hidden md:table-cell 區域
grep -n "hidden md:table-cell" -A 30 /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/products.php | grep -c "text-blue-600\|text-slate-600\|text-red-500"
```
  </verify>
  <done>手機版卡片操作按鈕已遷移，桌面版 icon-only 按鈕保持現狀</done>
</task>

<task type="auto">
  <name>Task 4: 遷移子頁面按鈕</name>
  <files>admin/partials/products.php</files>
  <action>
找到並替換子頁面（編輯、分配、下單名單）的頁尾按鈕：

1. **取消/關閉按鈕**:
   - Before: `class="px-3 py-1.5 md:px-4 md:py-2 bg-white border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50 transition text-xs md:text-sm font-medium"`
   - After: `class="btn btn-secondary"`

2. **儲存/確認按鈕**:
   - Before: `class="px-3 py-1.5 md:px-6 md:py-2 bg-primary text-white rounded-lg hover:bg-blue-700 transition text-xs md:text-sm font-medium shadow-lg shadow-blue-200"`
   - After: `class="btn btn-primary"`

保留所有 Vue directives (@click, v-if, :disabled)
  </action>
  <verify>
```bash
grep -n "currentView !== 'list'" -A 20 /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/products.php | grep -n "button"
```
  </verify>
  <done>子頁面按鈕已遷移</done>
</task>

</tasks>

<verification>
1. 確認 View Mode 切換功能保持不變
2. 確認 Grid View 未被修改（Phase 10 決策）
3. 確認桌面版表格 icon-only 按鈕保持不變
4. 確認 Vue directives 完整保留

```bash
# 確認 viewMode 相關邏輯存在
grep -n "viewMode" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/products.php | head -5

# 確認 Vue directives 保留
grep -c "@click" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/products.php
grep -c "v-if\|v-show" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/products.php

# 確認桌面版 icon-only 按鈕仍使用 inline styles（未被遷移）
grep -c "text-blue-600.*hover:bg-blue-50\|text-slate-600.*hover:bg-slate-50\|text-red-500.*hover:bg-red-50" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/products.php
```
</verification>

<success_criteria>
- [ ] 批次刪除按鈕使用 btn btn-danger classes
- [ ] 狀態切換按鈕使用 status-tag 視覺外觀（保持 button 元素可點擊）
- [ ] 手機版卡片操作按鈕使用 btn classes
- [ ] 子頁面按鈕使用 btn classes
- [ ] 桌面版表格 icon-only 按鈕保持現狀（未遷移）
- [ ] Grid View 未被修改
- [ ] 所有 Vue directives 保持不變
</success_criteria>

<output>
After completion, create `.planning/phases/11-按鈕與狀態標籤遷移/11-05-SUMMARY.md`
</output>
