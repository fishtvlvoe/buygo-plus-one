---
phase: 11-按鈕與狀態標籤遷移-4-個頁面
plan: 04
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - admin/partials/orders.php
autonomous: true

must_haves:
  truths:
    - "orders.php 所有操作按鈕使用 .btn classes"
    - "orders.php 狀態下拉選單保留原有功能"
    - "orders.php 狀態標籤（如有）使用 .status-tag classes"
    - "父子訂單功能保持不變"
    - "所有 Vue directives 保持不變"
  artifacts:
    - path: "admin/partials/orders.php"
      provides: "遷移後的按鈕和狀態標籤"
      contains: "btn btn-"
  key_links:
    - from: "admin/partials/orders.php"
      to: "design-system/components/button.css"
      via: "CSS class"
      pattern: "btn btn-primary|btn btn-secondary"
---

<objective>
遷移 orders.php 的按鈕和狀態標籤到設計系統

Purpose: 統一訂單頁面的按鈕和狀態樣式
Output: 更新後的 orders.php，使用設計系統 classes
</objective>

<execution_context>
@/Users/fishtv/.claude/get-shit-done/workflows/execute-plan.md
@/Users/fishtv/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@admin/partials/orders.php
@design-system/components/button.css
@design-system/components/status-tag.css
@.planning/phases/11-按鈕與狀態標籤遷移-4-個頁面/11-CONTEXT.md
@.planning/phases/11-按鈕與狀態標籤遷移-4-個頁面/11-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: 遷移批次操作按鈕</name>
  <files>admin/partials/orders.php</files>
  <action>
找到並替換批次操作按鈕（line ~55-60）：

1. **批次轉備貨按鈕**:
   - Before: `class="px-3 py-1.5 bg-orange-50 text-orange-600 rounded-lg text-xs font-medium hover:bg-orange-100 border border-orange-200 transition disabled:opacity-50"`
   - After: `class="btn btn-primary btn-sm"`
   - 保留 `:disabled="batchProcessing"` 和 `@click="batchPrepare"`

2. **批次刪除按鈕**:
   - Before: `class="px-3 py-1.5 bg-red-50 text-red-600 rounded-lg text-xs font-medium hover:bg-red-100 border border-red-200 transition"`
   - After: `class="btn btn-danger btn-sm"`
   - 保留 `@click="batchDelete"`
  </action>
  <verify>
```bash
grep -n "batchPrepare\|batchDelete" admin/partials/orders.php | head -5
```
  </verify>
  <done>批次操作按鈕已遷移</done>
</task>

<task type="auto">
  <name>Task 2: 遷移表格操作按鈕</name>
  <files>admin/partials/orders.php</files>
  <action>
找到並替換桌面版表格的操作按鈕：

1. **查看詳情按鈕** (line ~262):
   - Before: `class="p-2 text-slate-500 hover:bg-slate-50 rounded-lg transition"`
   - After: `class="btn btn-secondary btn-sm"` （保留 icon 內容）
   - 注意：這是一個 icon-only 按鈕，保持原有樣式可能更適合

2. **轉備貨按鈕** (父訂單，line ~266-271):
   - Before: `class="px-3 py-1.5 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-lg transition shadow-sm"`
   - After: `class="btn btn-primary btn-sm"`
   - 保留 `v-if` 和 `@click` directives

3. **備貨中狀態指示** (line ~273-277):
   - 這是一個 `<span>` 不是按鈕，轉換為 status-tag
   - Before: `class="px-3 py-1.5 bg-yellow-100 text-yellow-700 text-sm font-medium rounded-lg border border-yellow-200 inline-flex items-center gap-1"`
   - After: `class="status-tag status-tag-warning inline-flex items-center gap-1"`

4. **待出貨狀態指示** (line ~279-283):
   - Before: `class="px-3 py-1.5 bg-blue-100 text-blue-700..."`
   - After: `class="status-tag status-tag-info inline-flex items-center gap-1"`

5. **已出貨狀態指示** (line ~284-289):
   - Before: `class="px-3 py-1.5 bg-green-100 text-green-700..."`
   - After: `class="status-tag status-tag-success inline-flex items-center gap-1"`

6. **子訂單的轉備貨按鈕** (line ~341-346):
   - Before: `class="px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white..."`
   - After: `class="btn btn-primary btn-sm"`

7. **子訂單的狀態指示** (line ~347-365):
   同樣遷移為 status-tag classes
  </action>
  <verify>
```bash
grep -c "btn btn-" admin/partials/orders.php
grep -c "status-tag" admin/partials/orders.php
```
  </verify>
  <done>表格操作按鈕和狀態指示已遷移</done>
</task>

<task type="auto">
  <name>Task 3: 遷移手機版卡片按鈕</name>
  <files>admin/partials/orders.php</files>
  <action>
找到並替換手機版卡片的按鈕（line ~480-510）：

1. **查看詳情按鈕**:
   - Before: `class="flex-1 py-2 bg-primary text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2"`
   - After: `class="btn btn-primary flex-1"`
   - 保留 icon 和文字

2. **轉備貨按鈕** (手機版，line ~486-491):
   - Before: `class="flex-1 px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-lg transition shadow-sm"`
   - After: `class="btn btn-primary flex-1"`

3. **狀態指示** (手機版，line ~492-509):
   - 備貨中: `class="status-tag status-tag-warning flex-1 flex items-center justify-center gap-1"`
   - 待出貨: `class="status-tag status-tag-info flex-1 flex items-center justify-center gap-1"`
   - 已出貨: `class="status-tag status-tag-success flex-1 flex items-center justify-center gap-1"`
  </action>
  <verify>
```bash
grep -n "card-list" -A 50 admin/partials/orders.php | grep -c "btn btn-\|status-tag"
```
  </verify>
  <done>手機版卡片按鈕和狀態指示已遷移</done>
</task>

</tasks>

<verification>
1. 確認狀態下拉選單功能保持不變：
   - 檢查 `getStatusClass` 和 `getStatusText` 方法仍被使用
   - 狀態下拉選單的 `:class` 綁定保持原狀（這是互動式選單，不是靜態標籤）

2. 確認父子訂單功能保持不變：
   ```bash
   grep -n "children\|childOrder" admin/partials/orders.php | head -5
   ```

3. 確認 Vue directives 完整保留：
   ```bash
   grep -c "@click" admin/partials/orders.php
   grep -c "v-if\|v-else-if" admin/partials/orders.php
   ```

4. 在瀏覽器測試（手動）：
   - 訪問訂單頁面
   - 確認按鈕樣式正確
   - 確認狀態下拉選單功能正常
   - 確認轉備貨功能正常
   - 測試父子訂單展開功能
</verification>

<success_criteria>
- [ ] 批次操作按鈕使用 btn btn-primary/btn-danger classes
- [ ] 操作按鈕使用 btn btn-primary/btn-secondary classes
- [ ] 狀態指示使用 status-tag + 顏色修飾符 classes
- [ ] 狀態下拉選單保持原有功能（互動式，不遷移）
- [ ] 父子訂單功能保持不變
- [ ] 所有 Vue directives 保持不變
- [ ] 桌面版和手機版樣式都正確
</success_criteria>

<output>
After completion, create `.planning/phases/11-按鈕與狀態標籤遷移-4-個頁面/11-04-SUMMARY.md`
</output>
