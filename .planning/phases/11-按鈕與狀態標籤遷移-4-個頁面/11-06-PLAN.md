---
phase: 11-按鈕與狀態標籤遷移-4-個頁面
plan: 06
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - admin/partials/settings.php
autonomous: true

must_haves:
  truths:
    - "settings.php 所有操作按鈕使用 .btn classes"
    - "settings.php Portal 按鈕保留（頁面特定功能）"
    - "所有 Vue directives 保持不變"
    - "模板編輯器功能保持不變"
  artifacts:
    - path: "admin/partials/settings.php"
      provides: "遷移後的按鈕"
      contains: "btn btn-"
  key_links:
    - from: "admin/partials/settings.php"
      to: "design-system/components/button.css"
      via: "CSS class"
      pattern: "btn btn-primary|btn btn-secondary"
---

<objective>
遷移 settings.php 的按鈕到設計系統

Purpose: 統一設定頁面的按鈕樣式
Output: 更新後的 settings.php，使用設計系統 classes
</objective>

<execution_context>
@/Users/fishtv/.claude/get-shit-done/workflows/execute-plan.md
@/Users/fishtv/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@admin/partials/settings.php
@design-system/components/button.css
@.planning/phases/11-按鈕與狀態標籤遷移-4-個頁面/11-CONTEXT.md
@.planning/phases/11-按鈕與狀態標籤遷移-4-個頁面/11-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: 遷移模板相關按鈕</name>
  <files>admin/partials/settings.php</files>
  <action>
找到並替換模板相關按鈕：

1. **儲存模板按鈕** (line ~305):
   - Before: `class="buygo-btn buygo-btn-primary"`
   - After: `class="btn btn-primary"`

2. **關鍵字訊息區按鈕** (line ~429, ~434):
   - 取消按鈕: `class="buygo-btn buygo-btn-secondary"` → `class="btn btn-secondary"`
   - 儲存按鈕: `class="buygo-btn buygo-btn-primary"` → `class="btn btn-primary"`

3. **複製變數按鈕** (line ~264, ~592):
   - 這些是輔助性小按鈕，保持 inline 樣式或遷移為 `class="btn btn-secondary btn-sm"`

4. **LINE 設定區按鈕** (line ~614, ~634, ~645):
   - 連結按鈕: `class="buygo-btn buygo-btn-primary"` → `class="btn btn-primary"`
   - 設定 Webhook 按鈕: `class="buygo-btn buygo-btn-primary flex items-center"` → `class="btn btn-primary flex items-center"`
   - 重設按鈕: `class="buygo-btn buygo-btn-secondary flex items-center"` → `class="btn btn-secondary flex items-center"`

5. **測試 LINE 訊息按鈕** (line ~758):
   - Before: `class="buygo-btn buygo-btn-primary px-4"`
   - After: `class="btn btn-primary"`

6. **頁面底部按鈕** (line ~897, ~902):
   - 取消按鈕: `class="buygo-btn buygo-btn-secondary"` → `class="btn btn-secondary"`
   - 儲存設定按鈕: `class="buygo-btn buygo-btn-primary"` → `class="btn btn-primary"`
  </action>
  <verify>
驗證按鈕遷移完成：
```bash
# 確認不再有 buygo-btn 舊 classes
grep -c "buygo-btn" admin/partials/settings.php || echo "No legacy classes found"

# 確認新 classes 已添加
grep -c "btn btn-primary\|btn btn-secondary" admin/partials/settings.php
```
  </verify>
  <done>所有 buygo-btn classes 已替換為 btn classes</done>
</task>

<task type="auto">
  <name>Task 2: 保留 Portal 按鈕樣式</name>
  <files>admin/partials/settings.php</files>
  <action>
確認 Portal 按鈕（line ~33-40）保持原有樣式：

```html
<a href="<?php echo esc_url(home_url('/buygo-portal/')); ?>"
    class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition text-sm font-medium hidden sm:inline-flex items-center gap-2">
```

這是一個特殊的導航按鈕，直接連結到前台 Portal，根據 CONTEXT.md 的決策，保留其頁面特定樣式。

**不需要修改此按鈕**。
  </action>
  <verify>
```bash
grep -n "Portal" admin/partials/settings.php | head -3
```
  </verify>
  <done>Portal 按鈕保持原有樣式</done>
</task>

</tasks>

<verification>
1. 確認沒有遺漏的 legacy classes：
   ```bash
   grep -n "buygo-btn" admin/partials/settings.php || echo "Clean"
   ```

2. 確認 Vue directives 完整保留：
   ```bash
   grep -c "@click" admin/partials/settings.php
   grep -c "v-if\|v-model" admin/partials/settings.php
   ```

3. 確認 Portal 按鈕未被修改：
   ```bash
   grep -n "buygo-portal" admin/partials/settings.php
   ```

4. 在瀏覽器測試（手動）：
   - 訪問設定頁面
   - 確認按鈕樣式正確
   - 確認模板編輯功能正常
   - 確認 LINE 設定功能正常
   - 測試儲存設定功能
</verification>

<success_criteria>
- [ ] 所有 buygo-btn-* classes 已替換為 btn btn-* classes
- [ ] Portal 按鈕保持頁面特定樣式
- [ ] 所有 Vue directives 保持不變
- [ ] 模板編輯器功能正常
- [ ] LINE 設定功能正常
- [ ] 儲存設定功能正常
</success_criteria>

<output>
After completion, create `.planning/phases/11-按鈕與狀態標籤遷移-4-個頁面/11-06-SUMMARY.md`
</output>
