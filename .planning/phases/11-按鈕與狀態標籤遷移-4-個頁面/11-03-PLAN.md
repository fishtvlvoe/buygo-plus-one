---
phase: 11-按鈕與狀態標籤遷移-4-個頁面
plan: 03
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - admin/partials/shipment-details.php
autonomous: true

must_haves:
  truths:
    - "shipment-details.php 所有按鈕使用 .btn classes"
    - "shipment-details.php Tab 切換按鈕保留原有樣式（Phase 10 已優化）"
    - "shipment-details.php 狀態標籤使用 .status-tag classes"
    - "所有 Vue directives 保持不變"
  artifacts:
    - path: "admin/partials/shipment-details.php"
      provides: "遷移後的按鈕和狀態標籤"
      contains: "btn btn-"
  key_links:
    - from: "admin/partials/shipment-details.php"
      to: "design-system/components/button.css"
      via: "CSS class"
      pattern: "btn btn-primary|btn btn-secondary"
---

<objective>
遷移 shipment-details.php 的按鈕和狀態標籤到設計系統

Purpose: 統一出貨明細頁面的按鈕和狀態樣式
Output: 更新後的 shipment-details.php，使用設計系統 classes
</objective>

<execution_context>
@/Users/fishtv/.claude/get-shit-done/workflows/execute-plan.md
@/Users/fishtv/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@admin/partials/shipment-details.php
@design-system/components/button.css
@design-system/components/status-tag.css
@.planning/phases/11-按鈕與狀態標籤遷移-4-個頁面/11-CONTEXT.md
@.planning/phases/11-按鈕與狀態標籤遷移-4-個頁面/11-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: 遷移操作按鈕</name>
  <files>admin/partials/shipment-details.php</files>
  <action>
找到並替換以下按鈕：

1. **批次操作按鈕** (桌面版，line ~124-149):
   - 批次標記已出貨: `class="buygo-btn buygo-btn-accent"` → `class="btn btn-primary"`
   - 批次移至存檔: `class="buygo-btn buygo-btn-secondary"` → `class="btn btn-secondary"`
   - 批次匯出 Excel: 保留 inline styles（灰色背景，特殊樣式）

2. **查看/出貨按鈕** (桌面版表格，line ~266-296):
   - 查看按鈕: `class="px-4 py-2 bg-slate-100 text-slate-700 rounded-lg..."` → `class="btn btn-secondary btn-sm"`
   - 出貨按鈕: `class="px-4 py-2 bg-blue-500 text-white rounded-lg..."` → `class="btn btn-primary btn-sm"`
   - 已出貨狀態指示器: 保持不變（disabled button，視覺指示用）
   - 已存檔狀態指示器: 保持不變

3. **查看/出貨按鈕** (手機版卡片，line ~336-368):
   - 查看按鈕: 遷移到 `class="btn btn-secondary"`
   - 出貨按鈕: 遷移到 `class="btn btn-primary"`
   - 狀態指示器: 保持不變

4. **詳情頁面按鈕** (line ~426-444):
   - Excel 匯出按鈕: 保留 inline styles（灰色背景）
   - 列印按鈕: `class="px-3 py-1.5 md:px-4 md:py-2 bg-orange-500..."` → `class="btn btn-primary btn-sm md:btn"`
   - 關閉按鈕: `class="px-3 py-1.5 md:px-4 md:py-2 bg-slate-900..."` → `class="btn btn-secondary btn-sm md:btn"`

5. **確認 Modal 按鈕** (line ~544-555):
   - 取消按鈕: `class="buygo-btn buygo-btn-secondary"` → `class="btn btn-secondary"`
   - 確認按鈕: `class="buygo-btn buygo-btn-accent"` → `class="btn btn-primary"`

**注意**：Tab 切換按鈕（line ~70-101）在 Phase 10 已優化過，保持現有樣式不變。
  </action>
  <verify>
驗證按鈕遷移完成：
```bash
# 確認不再有 buygo-btn 舊 classes
grep -c "buygo-btn" admin/partials/shipment-details.php || echo "No legacy classes found"

# 確認新 classes 已添加
grep -c "btn btn-primary\|btn btn-secondary" admin/partials/shipment-details.php
```
  </verify>
  <done>所有操作按鈕已遷移到設計系統 .btn classes（Tab 按鈕除外）</done>
</task>

<task type="auto">
  <name>Task 2: 遷移狀態標籤</name>
  <files>admin/partials/shipment-details.php</files>
  <action>
找到並替換狀態標籤：

1. **手機版卡片狀態標籤** (line ~320-327):

   Before:
   ```html
   :class="[
       'px-2 py-0.5 text-xs font-medium rounded-full',
       activeTab === 'ready_to_ship' ? 'bg-orange-100 text-orange-600' :
       activeTab === 'shipped' ? 'bg-green-100 text-green-600' :
       'bg-slate-100 text-slate-600'
   ]"
   ```

   After:
   ```html
   :class="[
       'status-tag',
       activeTab === 'ready_to_ship' ? 'status-tag-warning' :
       activeTab === 'shipped' ? 'status-tag-success' :
       'status-tag-neutral'
   ]"
   ```

   根據 CONTEXT.md 的顏色語義：
   - ready_to_ship (待出貨) → status-tag-warning (黃色，表示處理中)
   - shipped (已出貨) → status-tag-success (綠色，表示成功)
   - archived (已存檔) → status-tag-neutral (灰色，表示中性)

2. **Tab 上的數量標籤** (line ~78-100):
   這些是 Tab 上的計數器，不是狀態標籤，保持原有樣式。
  </action>
  <verify>
驗證狀態標籤遷移完成：
```bash
# 確認新 classes 已添加
grep -c "status-tag" admin/partials/shipment-details.php
```
  </verify>
  <done>手機版卡片狀態標籤已遷移到設計系統 .status-tag classes</done>
</task>

</tasks>

<verification>
1. 確認沒有遺漏的 legacy classes：
   ```bash
   grep -n "buygo-btn" admin/partials/shipment-details.php || echo "Clean"
   ```

2. 確認 Vue directives 完整保留：
   ```bash
   grep -c "@click" admin/partials/shipment-details.php
   grep -c "v-if" admin/partials/shipment-details.php
   ```

3. 在瀏覽器測試（手動）：
   - 訪問出貨明細頁面
   - 確認 Tab 切換功能正常
   - 確認查看/出貨按鈕樣式正確
   - 確認狀態標籤顏色正確
   - 測試批次操作功能
</verification>

<success_criteria>
- [ ] 所有 buygo-btn-* classes 已替換為 btn btn-* classes
- [ ] 狀態標籤使用 status-tag + status-tag-warning/success/neutral classes
- [ ] Tab 切換按鈕保持 Phase 10 優化後的樣式
- [ ] 所有 Vue directives 保持不變
- [ ] 批次操作功能正常
- [ ] 桌面版和手機版樣式都正確
</success_criteria>

<output>
After completion, create `.planning/phases/11-按鈕與狀態標籤遷移-4-個頁面/11-03-SUMMARY.md`
</output>
