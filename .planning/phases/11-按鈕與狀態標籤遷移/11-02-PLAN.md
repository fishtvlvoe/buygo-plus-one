---
phase: 11-按鈕與狀態標籤遷移
plan: 02
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - admin/partials/shipment-details.php
autonomous: true

must_haves:
  truths:
    - "shipment-details.php 所有操作按鈕使用 .btn classes"
    - "shipment-details.php Tab 切換按鈕保留原有樣式（Phase 10 已優化）"
    - "shipment-details.php 狀態標籤使用 .status-tag classes"
    - "所有 Vue directives 保持不變"
    - "批次操作功能正常"
  artifacts:
    - path: "admin/partials/shipment-details.php"
      provides: "遷移後的按鈕和狀態標籤"
      contains: "btn btn-"
  key_links:
    - from: "admin/partials/shipment-details.php"
      to: "design-system/components/button.css"
      via: "CSS class"
      pattern: "btn btn-primary|btn btn-secondary"
---

<objective>
遷移 shipment-details.php 的按鈕和狀態標籤到設計系統

Purpose: 統一出貨明細頁面的按鈕和狀態樣式
Output: 更新後的 shipment-details.php，使用設計系統 classes
</objective>

<execution_context>
@/Users/fishtv/.claude/get-shit-done/workflows/execute-plan.md
@/Users/fishtv/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@admin/partials/shipment-details.php
@design-system/components/button.css
@design-system/components/status-tag.css
@.planning/phases/11-按鈕與狀態標籤遷移/11-CONTEXT.md
@.planning/phases/11-按鈕與狀態標籤遷移/11-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: 遷移批次操作按鈕</name>
  <files>admin/partials/shipment-details.php</files>
  <action>
找到並替換批次操作按鈕（line ~120-150）：

1. **批次標記已出貨按鈕**:
   - Before: `class="buygo-btn buygo-btn-accent"`
   - After: `class="btn btn-primary"`
   - 保留 `v-if="activeTab === 'ready_to_ship'"` 和 `@click="batchMarkShipped"`

2. **批次移至存檔按鈕**:
   - Before: `class="buygo-btn buygo-btn-secondary"`
   - After: `class="btn btn-secondary"`
   - 保留 `v-if="activeTab === 'shipped'"` 和 `@click="batchArchive"`

3. **批次匯出 Excel 按鈕**:
   - 保留現有 inline styles（灰色背景，特殊樣式，不在遷移範圍）

**Tab 切換按鈕（line ~70-101）**：保持 Phase 10 優化後的樣式，不修改。
  </action>
  <verify>
```bash
# 確認批次操作按鈕已遷移
grep -n "batchMarkShipped\|batchArchive" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-details.php | head -4
```
  </verify>
  <done>批次操作按鈕已遷移</done>
</task>

<task type="auto">
  <name>Task 2: 遷移查看/出貨按鈕</name>
  <files>admin/partials/shipment-details.php</files>
  <action>
找到並替換查看/出貨按鈕：

1. **桌面版表格按鈕**:
   - 查看按鈕: inline Tailwind → `class="btn btn-secondary btn-sm"`
   - 出貨按鈕: inline Tailwind → `class="btn btn-primary btn-sm"`
   - 已出貨/已存檔狀態指示器: 保持不變（disabled button，視覺指示用）

2. **手機版卡片按鈕**:
   - 查看按鈕: → `class="btn btn-secondary"`
   - 出貨按鈕: → `class="btn btn-primary"`
   - 狀態指示器: 保持不變

3. **詳情頁面按鈕**:
   - 列印按鈕: → `class="btn btn-primary btn-sm md:btn"`
   - 關閉按鈕: → `class="btn btn-secondary btn-sm md:btn"`
   - Excel 匯出: 保留 inline styles

4. **確認 Modal 按鈕**:
   - 取消按鈕: `buygo-btn buygo-btn-secondary` → `btn btn-secondary`
   - 確認按鈕: `buygo-btn buygo-btn-accent` → `btn btn-primary`

保留所有 Vue directives (@click, v-if, :disabled)
  </action>
  <verify>
```bash
# 確認不再有 buygo-btn 舊 classes
grep -c "buygo-btn" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-details.php || echo "No legacy classes found"

# 確認新 classes 已添加
grep -c "btn btn-primary\|btn btn-secondary" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-details.php
```
  </verify>
  <done>查看/出貨按鈕已遷移</done>
</task>

<task type="auto">
  <name>Task 3: 遷移狀態標籤</name>
  <files>admin/partials/shipment-details.php</files>
  <action>
找到並替換手機版卡片狀態標籤：

Before (inline Tailwind):
```html
:class="[
    'px-2 py-0.5 text-xs font-medium rounded-full',
    activeTab === 'ready_to_ship' ? 'bg-orange-100 text-orange-600' :
    activeTab === 'shipped' ? 'bg-green-100 text-green-600' :
    'bg-slate-100 text-slate-600'
]"
```

After (設計系統):
```html
:class="[
    'status-tag',
    activeTab === 'ready_to_ship' ? 'status-tag-warning' :
    activeTab === 'shipped' ? 'status-tag-success' :
    'status-tag-neutral'
]"
```

根據 CONTEXT.md 顏色語義：
- ready_to_ship (待出貨) → status-tag-warning (黃色)
- shipped (已出貨) → status-tag-success (綠色)
- archived (已存檔) → status-tag-neutral (灰色)

**Tab 上的數量標籤**（line ~78-100）：保持原有樣式，這是計數器不是狀態標籤。
  </action>
  <verify>
```bash
# 確認 status-tag classes 已添加
grep -c "status-tag" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-details.php

# 確認顏色語義正確
grep -n "status-tag-warning\|status-tag-success\|status-tag-neutral" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-details.php | head -5
```
  </verify>
  <done>狀態標籤已遷移到設計系統</done>
</task>

</tasks>

<verification>
1. 確認沒有遺漏的 legacy classes
2. 確認 Tab 切換按鈕保持 Phase 10 樣式
3. 確認 Vue directives 完整保留

```bash
grep -n "buygo-btn" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-details.php || echo "Clean"
grep -c "@click" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-details.php
```
</verification>

<success_criteria>
- [ ] 所有 buygo-btn-* classes 已替換為 btn btn-* classes
- [ ] 狀態標籤使用 status-tag + status-tag-warning/success/neutral classes
- [ ] Tab 切換按鈕保持 Phase 10 優化後的樣式
- [ ] 所有 Vue directives 保持不變
- [ ] 批次操作功能正常
</success_criteria>

<output>
After completion, create `.planning/phases/11-按鈕與狀態標籤遷移/11-02-SUMMARY.md`
</output>
