---
phase: 11-按鈕與狀態標籤遷移
plan: 03
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - admin/partials/orders.php
autonomous: true

must_haves:
  truths:
    - "orders.php 批次操作按鈕使用 .btn classes（轉備貨 primary, 刪除 danger）"
    - "orders.php 操作按鈕使用 .btn classes"
    - "orders.php 狀態指示標籤使用 .status-tag classes"
    - "狀態下拉選單保留原有功能（互動式選單）"
    - "父子訂單功能保持不變"
    - "所有 Vue directives 保持不變"
  artifacts:
    - path: "admin/partials/orders.php"
      provides: "遷移後的按鈕和狀態標籤"
      contains: "btn btn-"
  key_links:
    - from: "admin/partials/orders.php"
      to: "design-system/components/button.css"
      via: "CSS class"
      pattern: "btn btn-primary|btn btn-danger"
---

<objective>
遷移 orders.php 的按鈕和狀態標籤到設計系統

Purpose: 統一訂單頁面的按鈕和狀態樣式
Output: 更新後的 orders.php，使用設計系統 classes
</objective>

<execution_context>
@/Users/fishtv/.claude/get-shit-done/workflows/execute-plan.md
@/Users/fishtv/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@admin/partials/orders.php
@design-system/components/button.css
@design-system/components/status-tag.css
@.planning/phases/11-按鈕與狀態標籤遷移/11-CONTEXT.md
@.planning/phases/11-按鈕與狀態標籤遷移/11-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: 遷移批次操作按鈕</name>
  <files>admin/partials/orders.php</files>
  <action>
找到並替換 Header 區域的批次操作按鈕（line ~55-61）：

1. **批次轉備貨按鈕**:
   - Before: `class="px-3 py-1.5 bg-orange-50 text-orange-600 rounded-lg text-xs font-medium hover:bg-orange-100 border border-orange-200 transition disabled:opacity-50"`
   - After: `class="btn btn-primary btn-sm"`
   - 保留 `:disabled="batchProcessing"` 和 `@click="batchPrepare"`

2. **批次刪除按鈕**:
   - Before: `class="px-3 py-1.5 bg-red-50 text-red-600 rounded-lg text-xs font-medium hover:bg-red-100 border border-red-200 transition"`
   - After: `class="btn btn-danger btn-sm"`
   - 保留 `@click="batchDelete"`
  </action>
  <verify>
```bash
grep -n "batchPrepare\|batchDelete" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/orders.php | head -5
```
  </verify>
  <done>批次操作按鈕已遷移</done>
</task>

<task type="auto">
  <name>Task 2: 遷移表格操作按鈕和狀態指示</name>
  <files>admin/partials/orders.php</files>
  <action>
找到並替換桌面版表格的操作元素：

**父訂單操作欄**:

1. **轉備貨按鈕**:
   - Before: `class="px-3 py-1.5 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-lg transition shadow-sm"`
   - After: `class="btn btn-primary btn-sm"`
   - 保留 `v-if` 和 `@click` directives

2. **備貨中狀態指示**（這是 `<span>` 不是按鈕）:
   - Before: `class="px-3 py-1.5 bg-yellow-100 text-yellow-700 text-sm font-medium rounded-lg border border-yellow-200 inline-flex items-center gap-1"`
   - After: `class="status-tag status-tag-warning inline-flex items-center gap-1"`

3. **待出貨狀態指示**:
   - Before: `class="px-3 py-1.5 bg-blue-100 text-blue-700..."`
   - After: `class="status-tag status-tag-info inline-flex items-center gap-1"`

4. **已出貨狀態指示**:
   - Before: `class="px-3 py-1.5 bg-green-100 text-green-700..."`
   - After: `class="status-tag status-tag-success inline-flex items-center gap-1"`

**子訂單操作欄**:

5. **子訂單轉備貨按鈕**:
   - Before: `class="px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white..."`
   - After: `class="btn btn-primary btn-sm"`

6. **子訂單狀態指示**: 同上，遷移為 status-tag classes
  </action>
  <verify>
```bash
grep -c "btn btn-" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/orders.php
grep -c "status-tag" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/orders.php
```
  </verify>
  <done>表格操作按鈕和狀態指示已遷移</done>
</task>

<task type="auto">
  <name>Task 3: 遷移手機版卡片按鈕</name>
  <files>admin/partials/orders.php</files>
  <action>
找到並替換手機版卡片的操作區域（card-list 區域）：

1. **查看詳情按鈕**:
   - Before: `class="flex-1 py-2 bg-primary text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2"`
   - After: `class="btn btn-primary flex-1"`
   - 保留 icon 和文字

2. **轉備貨按鈕**:
   - Before: inline Tailwind
   - After: `class="btn btn-primary flex-1"`

3. **狀態指示**:
   - 備貨中: `class="status-tag status-tag-warning flex-1 flex items-center justify-center gap-1"`
   - 待出貨: `class="status-tag status-tag-info flex-1 flex items-center justify-center gap-1"`
   - 已出貨: `class="status-tag status-tag-success flex-1 flex items-center justify-center gap-1"`

保留所有 Vue directives 和 icon SVGs
  </action>
  <verify>
```bash
# 驗證手機版卡片區域的遷移
grep -n "card-list" -A 50 /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/orders.php | grep -c "btn btn-\|status-tag"
```
  </verify>
  <done>手機版卡片按鈕和狀態指示已遷移</done>
</task>

</tasks>

<verification>
1. 確認狀態下拉選單功能保持不變（這是互動式選單，不是靜態標籤）
2. 確認父子訂單功能保持不變
3. 確認 Vue directives 完整保留

```bash
# 確認狀態下拉選單相關方法存在
grep -n "getStatusClass\|getStatusText" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/orders.php | head -3

# 確認父子訂單邏輯存在
grep -n "children\|childOrder" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/orders.php | head -5

# 確認 Vue directives 保留
grep -c "@click" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/orders.php
grep -c "v-if\|v-else-if" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/orders.php
```
</verification>

<success_criteria>
- [ ] 批次操作按鈕使用 btn btn-primary/btn-danger classes
- [ ] 操作按鈕使用 btn btn-primary/btn-secondary classes
- [ ] 狀態指示使用 status-tag + 顏色修飾符 classes
- [ ] 狀態下拉選單保持原有功能（互動式，不遷移）
- [ ] 父子訂單功能保持不變
- [ ] 所有 Vue directives 保持不變
</success_criteria>

<output>
After completion, create `.planning/phases/11-按鈕與狀態標籤遷移/11-03-SUMMARY.md`
</output>
