---
phase: 11-按鈕與狀態標籤遷移
plan: 02
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - admin/partials/shipment-products.php
autonomous: true

must_haves:
  truths:
    - "shipment-products.php 所有按鈕使用 .btn classes"
    - "shipment-products.php 狀態標籤使用 .status-tag classes"
    - "所有 Vue directives (@click, v-if, :class) 保持不變"
  artifacts:
    - path: "admin/partials/shipment-products.php"
      provides: "遷移後的按鈕和狀態標籤"
      contains: "btn btn-"
  key_links:
    - from: "admin/partials/shipment-products.php"
      to: "design-system/components/button.css"
      via: "CSS class"
      pattern: "btn btn-primary|btn btn-secondary"
---

<objective>
遷移 shipment-products.php 的按鈕和狀態標籤到設計系統

Purpose: 統一出貨商品頁面的按鈕和狀態樣式
Output: 更新後的 shipment-products.php，使用設計系統 classes
</objective>

<execution_context>
@/Users/fishtv/.claude/get-shit-done/workflows/execute-plan.md
@/Users/fishtv/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@design-system/components/button.css
@design-system/components/status-tag.css
@admin/partials/shipment-products.php
@.planning/phases/11-按鈕與狀態標籤遷移/11-CONTEXT.md
@.planning/phases/11-按鈕與狀態標籤遷移/11-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: 遷移 shipment-products.php 按鈕</name>
  <files>admin/partials/shipment-products.php</files>
  <action>
找到並替換以下按鈕：

1. **重新載入按鈕** (line ~104):
   - Before: `class="buygo-btn buygo-btn-primary mt-4"`
   - After: `class="btn btn-primary mt-4"`
   - 保留 `@click="loadShipments"`

2. **合併按鈕** (桌面版，line ~121-122):
   - Before: `class="px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white font-medium rounded-lg transition shadow-sm"`
   - After: `class="btn btn-primary"`
   - 保留 `:disabled="!canMerge"` 和 `:class` 條件

3. **轉出貨按鈕** (桌面版表格):
   - Before: inline Tailwind classes
   - After: `class="btn btn-primary btn-sm"`
   - 保留 `v-if` 和 `@click` directives

4. **轉出貨按鈕** (手機版卡片):
   - Before: inline Tailwind classes
   - After: `class="btn btn-primary btn-block"`

5. **確認 Modal 按鈕**:
   - 取消按鈕: `buygo-btn buygo-btn-secondary` → `btn btn-secondary`
   - 確認按鈕: `buygo-btn buygo-btn-accent` → `btn btn-primary`

**注意**：保留所有 Vue directives (@click, v-if, :disabled, :class)
  </action>
  <verify>
```bash
# 確認不再有 buygo-btn 舊 classes
grep -c "buygo-btn" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-products.php || echo "No legacy classes found"

# 確認新 classes 已添加
grep -c "btn btn-primary\|btn btn-secondary" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-products.php
```
  </verify>
  <done>所有按鈕已遷移到設計系統 .btn classes</done>
</task>

<task type="auto">
  <name>Task 2: 遷移 shipment-products.php 狀態標籤</name>
  <files>admin/partials/shipment-products.php</files>
  <action>
找到並替換狀態標籤：

**桌面版和手機版狀態標籤**:

Before (inline Tailwind):
```html
:class="{
    'bg-yellow-100 text-yellow-800 border border-yellow-300': shipment.status === 'pending' || shipment.status === '備貨中',
    'bg-green-100 text-green-800 border border-green-300': shipment.status === 'shipped' || shipment.status === '已出貨'
}"
class="inline-block px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap"
```

After (設計系統):
```html
:class="{
    'status-tag-warning': shipment.status === 'pending' || shipment.status === '備貨中',
    'status-tag-success': shipment.status === 'shipped' || shipment.status === '已出貨'
}"
class="status-tag"
```

根據 CONTEXT.md 顏色語義：
- pending/備貨中 → status-tag-warning (黃色)
- shipped/已出貨 → status-tag-success (綠色)
  </action>
  <verify>
```bash
# 確認 status-tag classes 已添加
grep -c "status-tag" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-products.php

# 確認 inline Tailwind 狀態樣式已移除
grep -c "bg-yellow-100 text-yellow-800\|bg-green-100 text-green-800" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-products.php || echo "No inline Tailwind status styles found"
```
  </verify>
  <done>狀態標籤已遷移到設計系統 .status-tag classes</done>
</task>

</tasks>

<verification>
1. 確認沒有遺漏的 legacy classes
2. Vue directives 完整保留

```bash
# 檢查 Vue directives 保留
grep -c "@click" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-products.php
grep -c "v-if" /Users/fishtv/Development/buygo-plus-one-dev/admin/partials/shipment-products.php
```
</verification>

<success_criteria>
- [ ] shipment-products.php 所有 buygo-btn-* 已替換為 btn btn-*
- [ ] shipment-products.php 狀態標籤使用 status-tag classes
- [ ] 所有 Vue directives 保持不變
</success_criteria>

<output>
After completion, create `.planning/phases/11-按鈕與狀態標籤遷移/11-02-SUMMARY.md`
</output>
